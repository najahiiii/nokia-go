"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{92896:function(e,t,n){n.d(t,{DashboardProvider:function(){return I},Q:function(){return M}});var l,a=n(57437),r=n(2265),s=n(14438),o=n(21555),i=n(12161),d=n(87769),u=n(42208),c=n(6596),m=n(62869),f=n(26110),p=n(95186),g=n(43643),x=n(94508);let v=r.forwardRef((e,t)=>{let{className:n,children:l,...r}=e;return(0,a.jsxs)(g.fC,{ref:t,className:(0,x.cn)("relative overflow-hidden",n),...r,children:[(0,a.jsx)(g.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(b,{}),(0,a.jsx)(g.Ns,{})]})});v.displayName=g.fC.displayName;let b=r.forwardRef((e,t)=>{let{className:n,orientation:l="vertical",...r}=e;return(0,a.jsx)(g.gb,{ref:t,orientation:l,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...r,children:(0,a.jsx)(g.q4,{className:"relative flex-1 rounded-full bg-border"})})});b.displayName=g.gb.displayName;var h=n(38846);function N(e){let{className:t,defaultValue:n,value:l,min:s=0,max:o=100,...i}=e,d=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(n)?n:[s,o],[l,n,s,o]);return(0,a.jsxs)(h.fC,{"data-slot":"slider",defaultValue:n,value:l,min:s,max:o,className:(0,x.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[(0,a.jsx)(h.fQ,{"data-slot":"slider-track",className:(0,x.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,a.jsx)(h.e6,{"data-slot":"slider-range",className:(0,x.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,a.jsx)(h.bU,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}var _=n(1828);function S(e){var t,n;let{open:l,onClose:r,messages:s,busy:i,onRefresh:d,onMarkRead:u,onDelete:c,selectedSmsId:p,onSelect:g}=e,x=null!==(n=null!==(t=s.find(e=>e.SMSID===p))&&void 0!==t?t:s[0])&&void 0!==n?n:null;return(0,a.jsx)(f.Vq,{open:l,onOpenChange:e=>{e||r()},children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"SMS Inbox"}),(0,a.jsxs)(f.Be,{children:[s.length," message",1===s.length?"":"s"," stored on the modem."]})]}),(0,a.jsx)(f.a7,{children:(0,a.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,260px),minmax(0,1fr)] lg:max-h-[70vh]",children:[(0,a.jsx)(v,{className:"min-h-[220px] max-h-[50vh] rounded-md border border-border bg-muted/20 lg:h-[60vh] lg:max-h-none",children:0===s.length?(0,a.jsx)("p",{className:"px-4 py-6 text-sm text-muted-foreground",children:"Inbox is empty."}):(0,a.jsx)("ul",{className:"text-sm",children:s.map(e=>(0,a.jsxs)("li",{onClick:()=>g(e.SMSID),className:"cursor-pointer border-b border-border/60 px-4 py-3 transition hover:bg-muted ".concat(e.SMSID===(null==x?void 0:x.SMSID)?"bg-muted/60":""),children:[(0,a.jsx)("p",{className:"font-semibold ".concat(e.SMSUnread?"text-foreground":"text-muted-foreground"),children:e.SMSSender||"Unknown sender"}),(0,a.jsx)("p",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:e.SMSContent||"(empty message)"}),(0,a.jsx)("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-muted-foreground/80",children:(0,o.F1)(e.SMSDateTime)})]},e.SMSID))})}),(0,a.jsx)("section",{className:"flex min-h-[220px] max-h-[50vh] flex-col gap-4 rounded-md border border-border bg-muted/10 p-4 lg:h-[60vh] lg:max-h-none",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:x.SMSSender||"Unknown sender"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,o.F1)(x.SMSDateTime)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.z,{variant:"outline",size:"sm",onClick:()=>u(x,!x.SMSUnread),disabled:i,children:x.SMSUnread?"Mark as read":"Mark as unread"}),(0,a.jsx)(m.z,{variant:"destructive",size:"sm",onClick:()=>c(x.SMSID),disabled:i,children:"Delete"})]})]}),(0,a.jsx)(v,{className:"flex-1 rounded-md border border-border bg-background p-4",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:x.SMSContent||"(empty message)"})})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a message on the left to read its contents."})})]})}),(0,a.jsxs)(f.cN,{className:"gap-2",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:d,disabled:i,children:"Refresh"}),(0,a.jsx)(m.z,{variant:"ghost",onClick:r,children:"Close"})]})]})})}function j(e){var t,n,l,s,o,c,p,g,x,v;let{open:b,onClose:h,simInfo:N}=e,_=null!==(l=null==N?void 0:null===(t=N.network_cfg)||void 0===t?void 0:t[0])&&void 0!==l?l:{},S=null!==(s=null==N?void 0:null===(n=N.sim_cfg)||void 0===n?void 0:n[0])&&void 0!==s?s:{},[j,w]=(0,r.useState)({});(0,r.useEffect)(()=>{b||w({})},[b]);let y=e=>{w(t=>({...t,[e]:!t[e]}))},k=[{label:"Status",value:null!==(o=null==S?void 0:S.Status)&&void 0!==o?o:null},{label:"Type",value:null!==(c=null==S?void 0:S.Type)&&void 0!==c?c:null},{label:"IMEI",value:null!==(p=null==_?void 0:_.IMEI)&&void 0!==p?p:null},{label:"ICCID",value:null!==(g=null==S?void 0:S.ICCID)&&void 0!==g?g:null},{label:"IMSI",value:null!==(x=null==S?void 0:S.IMSI)&&void 0!==x?x:null},{label:"MSISDN",value:null!==(v=null==S?void 0:S.MSISDN)&&void 0!==v?v:null}],C=new Set(["IMEI","ICCID","IMSI","MSISDN"]);return(0,a.jsx)(f.Vq,{open:b,onOpenChange:e=>e?void 0:h(),children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsxs)(f.$N,{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"})," SIM Card Information"]}),(0,a.jsx)(f.Be,{children:"Details reported by the modem for the currently installed SIM card."})]}),(0,a.jsx)(f.a7,{children:N?(0,a.jsx)("div",{className:"grid gap-3 text-sm",children:k.map(e=>{let{label:t,value:n}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-md border border-border/60 bg-muted/10 px-3 py-2",children:[(0,a.jsx)("span",{className:"font-semibold text-muted-foreground",children:t}),(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(()=>{let e=null!==n&&""!==String(n).trim(),l=e?String(n):"—",r=C.has(t),s=!!j[t];return(0,a.jsx)("span",{className:"text-foreground",style:r&&e&&!s?{filter:"blur(6px)",userSelect:"none"}:void 0,children:l})})(),(()=>{let e=null!==n&&""!==String(n).trim();if(!C.has(t)||!e)return null;let l=!!j[t];return(0,a.jsx)(m.z,{variant:"ghost",size:"icon",onClick:()=>y(t),"aria-label":l?"Hide ".concat(t):"Show ".concat(t),children:l?(0,a.jsx)(d.Z,{className:"h-4 w-4"}):(0,a.jsx)(u.Z,{className:"h-4 w-4"})})})()]})]},t)})}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"SIM information is not available. Try refreshing the dashboard."})}),(0,a.jsx)(f.cN,{children:(0,a.jsx)(m.z,{variant:"outline",onClick:h,children:"Close"})})]})})}function w(e){var t,n;let{open:l,onClose:s,draft:i,onChange:g,onSubmit:x,saving:v}=e,[b,h]=(0,r.useState)(!1),[S,j]=(0,r.useState)(!1);if(!l||!i)return null;let w="true"===i.telegram_enabled,y="true"===i.long_polling_enabled,k="true"===i.long_polling_forward_sms_to_telegram,C="true"===i.mqtt_enabled,M=Number.parseFloat(null!==(t=i.poll_interval_ms)&&void 0!==t?t:""),I=Number.isFinite(M)?Math.min(Math.max(M,1e3),6e4):1e3,D=Number((0,o.tu)(I).toFixed(2)),E=Number.parseFloat(null!==(n=i.long_polling_interval_seconds)&&void 0!==n?n:""),T=Number.isFinite(E)?Math.min(Math.max(Math.floor(E),5),600):10,R=T>=60?"".concat((T/60).toFixed(1)," min"):"Less than 1 min";return(0,a.jsx)(f.Vq,{open:l,onOpenChange:e=>{e||s()},children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"Edit Configuration"}),(0,a.jsx)(f.Be,{children:"Update modem credentials, listener address, and optional Telegram bridge."})]}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:x,children:[(0,a.jsxs)(f.a7,{className:"max-h-[65vh] space-y-6 overflow-y-auto text-sm",children:[(0,a.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Modem Connection"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure modem credentials and the local listener endpoint."})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Host"}),(0,a.jsx)(p.I,{value:i.router_host,onChange:e=>g("router_host",e.target.value),required:!0})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem User"}),(0,a.jsx)(p.I,{value:i.router_user,onChange:e=>g("router_user",e.target.value)})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.I,{type:b?"text":"password",value:i.router_password,onChange:e=>g("router_password",e.target.value),className:"pr-10"}),(0,a.jsx)(m.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>h(e=>!e),className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":b?"Hide password":"Show password",children:b?(0,a.jsx)(d.Z,{className:"h-4 w-4"}):(0,a.jsx)(u.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Host"}),(0,a.jsx)(p.I,{value:i.listen_host,onChange:e=>g("listen_host",e.target.value),required:!0})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Port"}),(0,a.jsx)(p.I,{value:i.listen_port,onChange:e=>g("listen_port",e.target.value),required:!0})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-foreground",children:[(0,a.jsxs)("span",{children:[D," s"]}),(0,a.jsxs)("span",{children:[I," ms"]})]}),(0,a.jsx)(N,{value:[I],min:1e3,max:6e4,step:1e3,onValueChange:e=>{var t;return g("poll_interval_ms",String(null!==(t=e[0])&&void 0!==t?t:1e3))},className:"w-full","aria-label":"Poll interval in milliseconds"})]})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Server Polling"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable backend polling of the modem for SMS forwarding and similar tasks."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:y?"Enabled":"Disabled"}),(0,a.jsx)(_.r,{checked:y,onCheckedChange:e=>g("long_polling_enabled",e?"true":"false"),"aria-label":"Toggle server polling"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-foreground",children:[(0,a.jsxs)("span",{children:[T," s"]}),(0,a.jsx)("span",{children:R})]}),(0,a.jsx)(N,{value:[T],min:5,max:600,step:1,onValueChange:e=>{var t;return g("long_polling_interval_seconds",String(null!==(t=e[0])&&void 0!==t?t:5))},disabled:!y,className:"w-full","aria-label":"Poll interval in seconds"})]}),(0,a.jsx)("span",{className:"text-[11px] text-muted-foreground",children:"Must be at least 5 seconds. Defaults to 10 seconds."})]}),(0,a.jsx)(c.UQ,{type:"single",collapsible:!0,className:"rounded-md border border-input bg-background text-muted-foreground md:col-span-2",children:(0,a.jsxs)(c.Qd,{value:"mqtt",children:[(0,a.jsx)(c.o4,{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"MQTT Publishing"}),(0,a.jsxs)(c.vF,{className:"space-y-3 border-t border-border px-3 pb-3 pt-3",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Push polling updates to MQTT topics. Expand to configure broker credentials."}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:C?"Enabled":"Disabled"}),(0,a.jsx)(_.r,{checked:C,onCheckedChange:e=>g("mqtt_enabled",e?"true":"false"),disabled:!y,"aria-label":"Toggle MQTT publishing"})]}),!y&&(0,a.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to configure MQTT publishing."}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Broker URL"}),(0,a.jsx)(p.I,{value:i.mqtt_broker,onChange:e=>g("mqtt_broker",e.target.value),disabled:!C||!y,placeholder:"mqtt://localhost:1883"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Client ID"}),(0,a.jsx)(p.I,{value:i.mqtt_client_id,onChange:e=>g("mqtt_client_id",e.target.value),disabled:!C||!y,placeholder:"nokia-modem-client"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Username"}),(0,a.jsx)(p.I,{value:i.mqtt_username,onChange:e=>g("mqtt_username",e.target.value),disabled:!C||!y,placeholder:"mqtt-user"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Password"}),(0,a.jsx)(p.I,{type:"password",value:i.mqtt_password,onChange:e=>g("mqtt_password",e.target.value),disabled:!C||!y,placeholder:"••••••••"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Topic base"}),(0,a.jsx)(p.I,{value:i.mqtt_topic_base,onChange:e=>g("mqtt_topic_base",e.target.value),disabled:!C||!y,placeholder:"modem/nokia"})]})]})]})]})})]})]}),(0,a.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Telegram Bridge"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure optional Telegram notifications via bot API."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:w?"Enabled":"Disabled"}),(0,a.jsx)(_.r,{checked:w,onCheckedChange:e=>g("telegram_enabled",e?"true":"false"),"aria-label":"Toggle Telegram notifications"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"API Base"}),(0,a.jsx)(p.I,{value:i.telegram_api_base,onChange:e=>g("telegram_api_base",e.target.value),disabled:!w,placeholder:"https://api.telegram.org"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Bot Token"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.I,{type:S?"text":"password",value:i.telegram_bot_token,onChange:e=>g("telegram_bot_token",e.target.value),disabled:!w,placeholder:"123456:ABC-DEF...",className:"pr-10"}),(0,a.jsx)(m.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>j(e=>!e),disabled:!w,className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":S?"Hide bot token":"Show bot token",children:S?(0,a.jsx)(d.Z,{className:"h-4 w-4"}):(0,a.jsx)(u.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Default Chat ID"}),(0,a.jsx)(p.I,{value:i.telegram_chat_id,onChange:e=>g("telegram_chat_id",e.target.value),disabled:!w,placeholder:"123456789"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Parse Mode"}),(0,a.jsxs)("select",{value:i.telegram_parse_mode,onChange:e=>g("telegram_parse_mode",e.target.value),disabled:!w,className:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[(0,a.jsx)("option",{value:"",children:"None"}),(0,a.jsx)("option",{value:"Markdown",children:"Markdown"}),(0,a.jsx)("option",{value:"MarkdownV2",children:"MarkdownV2"}),(0,a.jsx)("option",{value:"HTML",children:"HTML"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Forward SMS to Telegram"}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-md border border-input bg-background px-3 py-2 text-xs shadow-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Use server polling to push unread SMS messages to Telegram."}),(0,a.jsx)(_.r,{checked:k,onCheckedChange:e=>g("long_polling_forward_sms_to_telegram",e?"true":"false"),disabled:!w||!y,"aria-label":"Toggle forwarding SMS to Telegram",title:y?void 0:"Enable server polling to forward SMS to Telegram."})]}),!y&&(0,a.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to forward SMS messages to Telegram."})]})]})]})]}),(0,a.jsxs)(f.cN,{className:"gap-2",children:[(0,a.jsx)(m.z,{type:"button",variant:"outline",disabled:v,onClick:s,children:"Cancel"}),(0,a.jsx)(m.z,{type:"submit",disabled:v,children:v?"Saving…":"Save changes"})]})]})]})})}function y(e){var t,n,l,r,s,i,d,u,c,p,g,x,v,b,h,N,_,S,j,w,y,k;let{open:C,onClose:M,preloginStatus:I,wanStatus:D}=e;if(!C)return null;let E=null!==(p=null==I?void 0:null===(l=I.wan_conns)||void 0===l?void 0:null===(n=l[0])||void 0===n?void 0:null===(t=n.ipConns)||void 0===t?void 0:t[0])&&void 0!==p?p:{},T=null!==(g=null==I?void 0:null===(r=I.root_info)||void 0===r?void 0:r[0])&&void 0!==g?g:{},R=null!==(x=null==D?void 0:null===(d=D.wan_conns)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:null===(s=i.ipConns)||void 0===s?void 0:s[0])&&void 0!==x?x:{},P=null!==(b=null!==(v=R.DefaultGateway)&&void 0!==v?v:E.DefaultGateway)&&void 0!==b?b:"—",A=null!==(h=(0,o.SR)(I))&&void 0!==h?h:"—",F=null!==(_=null!==(N=R.X_CT_COM_IPv6IPAddress)&&void 0!==N?N:E.X_CT_COM_IPv6IPAddress)&&void 0!==_?_:"—",U=(E.DNSServers||"").split(/[ ,\n]+/).map(e=>e.trim()).filter(Boolean),q=U.length>0?U.join(", "):"Not provided",L=null!==(S=null==T?void 0:T.RootMacAddress)&&void 0!==S?S:"—",z=null!==(j=null==I?void 0:null===(c=I.device_cfg)||void 0===c?void 0:null===(u=c[0])||void 0===u?void 0:u.X_ALU_COM_LastActiveTime)&&void 0!==j?j:null,B=(0,o._o)(z),Z="string"==typeof z&&""!==z.trim()&&"—"!==B&&B!==z?"".concat(B," • ").concat(z):B,O=[{label:"Connection",value:null!==(w=E.Name)&&void 0!==w?w:"—"},{label:"Status",value:null!==(k=null!==(y=R.ConnectionStatus)&&void 0!==y?y:E.ConnectionStatus)&&void 0!==k?k:"Unknown"},{label:"External IPv4",value:A},{label:"External IPv6",value:F},{label:"Gateway",value:null!=P?P:"—"},{label:"DNS Servers",value:q},{label:"MAC Address",value:L},{label:"Session Length",value:Z}];return(0,a.jsx)(f.Vq,{open:C,onOpenChange:e=>{e||M()},children:(0,a.jsxs)(f.cZ,{children:[(0,a.jsxs)(f.fK,{children:[(0,a.jsx)(f.$N,{children:"WAN Connection Details"}),(0,a.jsx)(f.Be,{children:"Connection properties reported by the modem."})]}),(0,a.jsx)(f.a7,{className:"max-h-[60vh] space-y-4 overflow-y-auto pr-1",children:(0,a.jsx)("div",{className:"grid gap-4 text-sm sm:grid-cols-2",children:O.map(e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-foreground",children:e.value})]},e.label))})}),(0,a.jsx)(f.cN,{children:(0,a.jsx)(m.z,{variant:"outline",onClick:M,children:"Close"})})]})})}let k=null!==(l=n(40257).env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==l?l:"",C=(0,r.createContext)(void 0);function M(){let e=(0,r.useContext)(C);if(!e)throw Error("useDashboard must be used within a DashboardProvider");return e}function I(e){var t;let{children:n}=e,[l,i]=(0,r.useState)({}),[d,u]=(0,r.useState)(!0),[c,m]=(0,r.useState)(null),[f,p]=(0,r.useState)(1e3),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[h,N]=(0,r.useState)(0),[_,M]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),[F,U]=(0,r.useState)(!1),[q,L]=(0,r.useState)(null),[z,B]=(0,r.useState)(!1),[Z,O]=(0,r.useState)(null),[V,Q]=(0,r.useState)(!1),[G,H]=(0,r.useState)(!1),[X,W]=(0,r.useState)(""),[$,K]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[en,el]=(0,r.useState)(!0),[ea,er]=(0,r.useState)(!1),es=(0,r.useRef)(null),eo=(0,r.useRef)(0),ei=(0,r.useRef)(0),ed=(0,r.useRef)(null),eu=(0,r.useCallback)(e=>{("success"===e.tone?s.Am.success:"error"===e.tone?s.Am.error:s.Am.info)(e.message)},[]);(0,r.useEffect)(()=>{let e=window.localStorage.getItem("pollingEnabled");null!==e&&el("true"===e)},[]),(0,r.useEffect)(()=>{var e;if(!I)return;let t=null!==(e=l.sms)&&void 0!==e?e:[];if(0===t.length){O(null);return}O(e=>e&&t.some(t=>t.SMSID===e)?e:t[0].SMSID)},[l.sms,I]);let ec=(0,r.useCallback)(()=>{N(Date.now())},[]),em=(0,r.useCallback)(e=>{z||(B(!0),(async()=>{try{let t=await fetch("".concat(k,"/api/led_state"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enable:e})});if(!t.ok)throw Error("LED update failed (".concat(t.status,")"));L(e),i(t=>({...t,ledState:e})),eu({tone:"success",message:e?"Device LEDs enabled.":"Device LEDs disabled."})}catch(e){eu({tone:"error",message:e.message||"Unable to change LED state."})}finally{B(!1)}})())},[z,eu]),ef=(0,r.useCallback)(()=>{$||(K(!0),eu({tone:"info",message:"Renewing WAN IP…"}),(async()=>{try{let e=(0,o.SR)(l.preloginStatus);await E("/api/set_apn?apn=internet"),await T(1e3),await E("/api/set_apn?apn=xlunlimited"),await T(1e3);let t=null,n=l.preloginStatus;for(let l=0;l<30&&(n=await D("/api/prelogin_status"),!(t=(0,o.SR)(n))||t===e);l+=1)await T(1e3);t&&t!==e?(eu({tone:"success",message:"New WAN IP acquired: ".concat(t)}),i(e=>({...e,preloginStatus:n}))):eu({tone:"error",message:"Unable to obtain a new WAN IP. Please try again later."})}catch(e){eu({tone:"error",message:e.message||"WAN IP renewal failed."})}finally{K(!1),N(Date.now())}})())},[l.preloginStatus,$,eu]),ep=(0,r.useCallback)(()=>{Y||(J(!0),eu({tone:"info",message:"Sending reboot command…"}),(async()=>{try{await D("/api/do_reboot"),eu({tone:"success",message:"Reboot command sent. Modem is restarting."})}catch(e){eu({tone:"error",message:e.message||"Unable to reboot the device."})}finally{J(!1)}})())},[Y,eu]),eg=(0,r.useCallback)(e=>{ee||(et(!0),(async()=>{try{var t;let n=Math.max(Date.now(),(null!==(t=l.dataExpired)&&void 0!==t?t:0)*1e3),a=Math.floor((n+1e3*e)/1e3);await E("/api/set_data_expired?data_expired=".concat(a)),i(e=>({...e,dataExpired:a})),eu({tone:"success",message:"Data expiration updated."})}catch(e){eu({tone:"error",message:e.message||"Failed to update data expiration."})}finally{et(!1)}})())},[l.dataExpired,ee,eu]),ex=(0,r.useCallback)(e=>{if(e.preventDefault(),ee)return;if(!X){eu({tone:"error",message:"Please pick a date first."});return}let t=new Date("".concat(X,"T00:00:00"));if(Number.isNaN(t.getTime())){eu({tone:"error",message:"Invalid date format."});return}et(!0),(async()=>{try{let e=Math.floor(t.getTime()/1e3);await E("/api/set_data_expired?data_expired=".concat(e)),i(t=>({...t,dataExpired:e})),W(""),eu({tone:"success",message:"Expiration date saved."})}catch(e){eu({tone:"error",message:e.message||"Failed to save expiration date."})}finally{et(!1)}})()},[X,ee,eu]),ev=(0,r.useCallback)(()=>{V||(Q(!0),(async()=>{try{let e=await D("/api/sms");i(t=>({...t,sms:(0,o.EE)(e)}))}catch(e){eu({tone:"error",message:e.message||"Unable to refresh SMS inbox."})}finally{Q(!1)}})())},[V,eu]),eb=(0,r.useCallback)((e,t)=>{V||(Q(!0),(async()=>{try{let n="/api/set_sms_state?smsid=".concat(encodeURIComponent(e.SMSID),"&smsunread=").concat(t?1:0);await D(n),i(n=>{var l;return{...n,sms:null===(l=n.sms)||void 0===l?void 0:l.map(n=>n.SMSID===e.SMSID?{...n,SMSUnread:t}:n)}})}catch(e){eu({tone:"error",message:e.message||"Unable to update SMS state."})}finally{Q(!1)}})())},[V,eu]),eh=(0,r.useCallback)(e=>{V||(Q(!0),(async()=>{try{let t=await fetch("".concat(k,"/api/delete_sms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sms_ids:[e]})});if(!t.ok)throw Error("Failed to delete SMS (".concat(t.status,")"));i(t=>{var n;return{...t,sms:null===(n=t.sms)||void 0===n?void 0:n.filter(t=>t.SMSID!==e)}}),O(t=>t===e?null:t),eu({tone:"success",message:"SMS deleted."})}catch(e){eu({tone:"error",message:e.message||"Unable to delete SMS."})}finally{Q(!1)}})())},[V,eu]),eN=(0,r.useCallback)(()=>{l.config&&A((0,o.SD)(l.config,1e3)),M(!0)},[l.config]),e_=(0,r.useCallback)((e,t)=>{A(n=>n?{...n,[e]:t}:n)},[]),eS=(0,r.useCallback)(e=>{e.preventDefault(),P&&!F&&(U(!0),(async()=>{try{let e=(0,o.Rg)(P,1e3);if(e<500)throw Error("Polling interval must be at least ".concat(500," ms."));let t=(()=>{let e=Number(P.long_polling_interval_seconds);return Number.isFinite(e)&&e>0?Math.max(5,Math.floor(e)):10})(),n={router_host:P.router_host,router_user:P.router_user,router_password:P.router_password,listen_host:P.listen_host,listen_port:P.listen_port,poll_interval_ms:e,telegram:{enabled:"true"===P.telegram_enabled,api_base:P.telegram_api_base.trim(),bot_token:P.telegram_bot_token.trim(),chat_id:P.telegram_chat_id.trim(),parse_mode:P.telegram_parse_mode.trim()},long_polling:{enabled:"true"===P.long_polling_enabled,forward_sms_to_telegram:"true"===P.long_polling_forward_sms_to_telegram,interval_seconds:t},mqtt:{enabled:"true"===P.mqtt_enabled,broker:P.mqtt_broker.trim(),client_id:P.mqtt_client_id.trim(),username:P.mqtt_username.trim(),password:P.mqtt_password,topic_base:P.mqtt_topic_base.trim()||"modem/nokia"}},l=await fetch("".concat(k,"/api/config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Config save failed (".concat(l.status,")"))}s.Am.success("Configuration saved."),M(!1),N(Date.now())}catch(e){s.Am.error(e.message||"Unable to save configuration.")}finally{U(!1)}})())},[P,F]),ej=(0,r.useCallback)(async()=>{if(es.current)return es.current;let e=eo.current+1;eo.current=e;let t=ei.current,n=(async()=>{try{b(!0);let[n,l,a,r,s,d,u,c,f,g,v,h,N,_]=await Promise.all([D("/api/config"),D("/api/prelogin_status"),D("/api/status_web"),D("/api/service_data"),D("/api/cell_identification").catch(()=>null),D("/api/device_status"),D("/api/daily_usage"),D("/api/get_data_expired").catch(()=>null),D("/api/sms").catch(()=>null),D("/api/wlan_configs_24g").catch(()=>null),D("/api/wlan_configs_5g").catch(()=>null),D("/api/wan_status").catch(()=>null),D("/api/led_state").catch(()=>null),D("/api/sim_info").catch(()=>null)]);if(t!==ei.current||e!==eo.current)return;let S=null!=n?n:{};i({config:S,preloginStatus:l,statusWeb:a,serviceData:r,cellIdentification:s,deviceStatus:d,dailyUsage:u,dataExpired:(0,o.GQ)(c),sms:(0,o.EE)(f),wlan24:g,wlan5:v,wanStatus:h,ledState:(0,o.Av)(N),simInfo:_}),L((0,o.Av)(N)),x(Date.now()),m(null);let j=Math.max(500,(0,o.Rg)(S,1e3));p(j)}catch(t){var n;if(e!==eo.current)return;m(null!==(n=t.message)&&void 0!==n?n:"Unable to load dashboard data.")}finally{e===eo.current&&(u(!1),b(!1)),es.current=null}})();return es.current=n,n},[]);(0,r.useEffect)(()=>{ej()},[h,ej]);let ew=_||I||G||ea||V||F||z||$||Y||ee,ey=en&&!ew;(0,r.useEffect)(()=>{if(null===ed.current){ed.current=ew;return}!ed.current&&ew&&(ei.current+=1),ed.current=ew},[ew]),(0,r.useEffect)(()=>{if(!ey)return;let e=!1,t=null,n=async()=>{await ej(),e||(t=setTimeout(n,f))};return n(),()=>{e=!0,t&&clearTimeout(t)}},[ey,f,ej]);let ek=(0,r.useCallback)(()=>{el(e=>{let t=!e;return window.localStorage.setItem("pollingEnabled",String(t)),window.dispatchEvent(new CustomEvent("polling:change",{detail:{enabled:t}})),t})},[]),eC=(0,r.useCallback)(()=>M(!1),[]),eM=(0,r.useCallback)(()=>R(!0),[]),eI=(0,r.useCallback)(()=>R(!1),[]),eD=(0,r.useCallback)(()=>H(!0),[]),eE=(0,r.useCallback)(()=>H(!1),[]),eT=(0,r.useCallback)(()=>er(!0),[]),eR=(0,r.useCallback)(()=>er(!1),[]),eP=(0,r.useMemo)(()=>Math.round(f/1e3),[f]),eA=(0,r.useMemo)(()=>{var e,t;return null!==(t=null===(e=l.sms)||void 0===e?void 0:e.filter(e=>e.SMSUnread).length)&&void 0!==t?t:0},[l.sms]),eF=(0,r.useMemo)(()=>{var e,t,n,a,r,s;let o=null!==(n=l.cellIdentification)&&void 0!==n?n:{};return null!==(s=null!==(r=null!==(a=null==o?void 0:null===(e=o.FunctionResult)||void 0===e?void 0:e.Name)&&void 0!==a?a:null==o?void 0:o.Name)&&void 0!==r?r:null==o?void 0:null===(t=o.functionResult)||void 0===t?void 0:t.Name)&&void 0!==s?s:null},[l.cellIdentification]),eU=(0,r.useMemo)(()=>{var e;return(0,o.j6)(null!==(e=l.statusWeb)&&void 0!==e?e:{},eF)},[l.statusWeb,eF]),eq=(0,r.useMemo)(()=>({data:l,setData:i,loading:d,error:c,pollMs:f,pollSeconds:eP,lastUpdated:g,isRefreshing:v,pollingEnabled:en,togglePolling:ek,handleManualRefresh:ec,unreadSms:eA,signalAssessment:eU,ledEnabled:q,ledBusy:z,handleToggleLed:em,renewing:$,handleRenewIp:ef,rebooting:Y,handleReboot:ep,expiryBusy:ee,handleExtendData:eg,customExpiry:X,setCustomExpiry:W,handleCustomExpirySubmit:ex,isSmsOpen:I,openSms:eM,closeSms:eI,smsBusy:V,handleSmsRefresh:ev,handleSmsMarkRead:eb,handleSmsDelete:eh,selectedSmsId:Z,setSelectedSmsId:O,isConfigOpen:_,openConfig:eN,closeConfig:eC,configDraft:P,handleConfigChange:e_,handleConfigSubmit:eS,configSaving:F,wanDialogOpen:G,openWanDetails:eD,closeWanDetails:eE,simDialogOpen:ea,openSimInfo:eT,closeSimInfo:eR}),[l,i,d,c,f,eP,g,v,en,ek,ec,eA,eU,q,z,em,$,ef,Y,ep,ee,eg,X,W,ex,I,eM,eI,V,ev,eb,eh,Z,O,_,eN,eC,P,e_,eS,F,G,eD,eE,ea,eT,eR]);return(0,a.jsxs)(C.Provider,{value:eq,children:[n,(0,a.jsx)(S,{open:I,onClose:eI,messages:null!==(t=l.sms)&&void 0!==t?t:[],busy:V,onRefresh:()=>{ev()},onMarkRead:(e,t)=>{eb(e,t)},onDelete:e=>{eh(e)},selectedSmsId:Z,onSelect:e=>O(e)}),(0,a.jsx)(w,{open:_,onClose:eC,draft:P,onChange:e_,onSubmit:e=>{eS(e)},saving:F}),(0,a.jsx)(y,{open:G,onClose:eE,preloginStatus:l.preloginStatus,wanStatus:l.wanStatus}),(0,a.jsx)(j,{open:ea,onClose:eR,simInfo:l.simInfo})]})}async function D(e){let t=await fetch("".concat(k).concat(e),{cache:"no-store"});if(!t.ok)throw Error("Request to ".concat(e," failed with ").concat(t.status));return await t.json()}async function E(e){let t=await fetch("".concat(k).concat(e));if(!t.ok)throw Error("Request to ".concat(e," failed with ").concat(t.status));await t.json().catch(()=>null)}async function T(e){return new Promise(t=>setTimeout(t,e))}},6596:function(e,t,n){n.d(t,{Qd:function(){return d},UQ:function(){return i},o4:function(){return u},vF:function(){return c}});var l=n(57437),a=n(13134),r=n(40875),s=n(2265),o=n(94508);let i=a.fC,d=s.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)(a.ck,{ref:t,className:(0,o.cn)("border-b",n),...r})});d.displayName="AccordionItem";let u=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,l.jsx)(a.h4,{className:"flex",children:(0,l.jsxs)(a.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",n),...i,children:[s,(0,l.jsx)(r.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});u.displayName=a.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:n,children:r,...s}=e;return(0,l.jsx)(a.VY,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:(0,l.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",n),children:r})})});c.displayName=a.VY.displayName},62869:function(e,t,n){n.d(t,{z:function(){return d}});var l=n(57437),a=n(37053),r=n(90535),s=n(2265),o=n(94508);let i=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:n,variant:r,size:s,asChild:d=!1,...u}=e,c=d?a.g7:"button";return(0,l.jsx)(c,{className:(0,o.cn)(i({variant:r,size:s,className:n})),ref:t,...u})});d.displayName="Button"},26110:function(e,t,n){n.d(t,{$N:function(){return f},Be:function(){return p},GG:function(){return d},Vq:function(){return o},a7:function(){return g},cN:function(){return x},cZ:function(){return c},fK:function(){return m}});var l=n(57437),a=n(49027),r=n(2265),s=n(94508);let o=a.fC;a.xz;let i=a.h_,d=a.x8,u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)(a.aV,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",n),...r})});u.displayName=a.aV.displayName;let c=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,l.jsxs)(i,{children:[(0,l.jsx)(u,{}),(0,l.jsx)(a.VY,{ref:t,className:(0,s.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-[calc(100vw-3rem)] -translate-x-1/2 -translate-y-1/2 gap-3 rounded-lg border border-border bg-background p-8 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-90 data-[state=closed]:zoom-out-95 sm:max-w-3xl sm:px-8",n),...o,children:r})]})});c.displayName=a.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,l.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-left",t),...n})};m.displayName="DialogHeader";let f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)(a.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});f.displayName=a.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)(a.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...r})});p.displayName=a.dk.displayName;let g=e=>{let{className:t,...n}=e;return(0,l.jsx)("div",{className:(0,s.cn)("space-y-2 text-sm",t),...n})};g.displayName="DialogBody";let x=e=>{let{className:t,...n}=e;return(0,l.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...n})};x.displayName="DialogFooter"},95186:function(e,t,n){n.d(t,{I:function(){return s}});var l=n(57437),a=n(2265),r=n(94508);let s=a.forwardRef((e,t)=>{let{className:n,type:a,...s}=e;return(0,l.jsx)("input",{type:a,className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),ref:t,...s})});s.displayName="Input"},1828:function(e,t,n){n.d(t,{r:function(){return o}});var l=n(57437),a=n(50721),r=n(2265),s=n(94508);let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,l.jsx)(a.fC,{className:(0,s.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:t,children:(0,l.jsx)(a.bU,{className:(0,s.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});o.displayName=a.fC.displayName},21555:function(e,t,n){n.d(t,{$2:function(){return i},Av:function(){return h},EE:function(){return b},F1:function(){return w},FM:function(){return j},GQ:function(){return function e(t){if("number"==typeof t&&Number.isFinite(t))return t;if("string"==typeof t){let e=Number(t);return Number.isFinite(e)?e:null}if(t&&"object"==typeof t){var n,l;let a=null!==(l=null!==(n=t.data_expired)&&void 0!==n?n:t.value)&&void 0!==l?l:t.timestamp;return e(null!=a?a:null)}return null}},Rg:function(){return g},SD:function(){return N},SR:function(){return _},_o:function(){return c},d5:function(){return p},gb:function(){return y},j6:function(){return v},p6:function(){return m},rl:function(){return d},sw:function(){return S},td:function(){return f},tu:function(){return u}});var l=n(8198),a=n(15169),r=n(54537),s=n(3847),o=n(12161);function i(e,t){return null==e||""===e?"—":"".concat(e," ").concat(t)}function d(e){return"number"!=typeof e||Number.isNaN(e)?"0%":"".concat(e.toFixed(1),"%")}function u(e){let t="string"==typeof e?Number.parseFloat(e):e;return Number.isFinite(t)?t/1e3:0}function c(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id-ID";if("string"!=typeof e||""===e.trim())return"—";let l=null!==(t=function(e){let t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2}):(\d{2})\s*(AM|PM)$/i);if(!t)return null;let[,n,l,a,r,s,o,i]=t,d=Number(n),u=Number(l)-1,c=Number(a),m=Number(r),f=Number(s),p=Number(o);if(!Number.isFinite(d)||!Number.isFinite(u)||!Number.isFinite(c)||!Number.isFinite(m)||!Number.isFinite(f)||!Number.isFinite(p))return null;let g=i.toUpperCase();"PM"===g&&m<12?m+=12:"AM"===g&&12===m&&(m=0);let x=new Date(c,u,d,m,f,p);return Number.isNaN(x.getTime())?null:x}(e.trim()))&&void 0!==t?t:new Date(e);if(!(l instanceof Date)||Number.isNaN(l.getTime()))return e;let a=(l.getTime()-Date.now())/1e3;if(!Number.isFinite(a))return e;let r=Math.abs(a),s=new Intl.RelativeTimeFormat(n,{numeric:"auto"});for(let[e,t]of[["year",31536e3],["month",2592e3],["week",604800],["day",86400],["hour",3600],["minute",60],["second",1]])if(r>=t||"second"===e){if("second"===e&&r<10)return a<=0?"baru saja":"sebentar lagi";let n=Math.trunc(a/t);if(0===n)continue;return s.format(n,e)}return"baru saja"}function m(e){if(!e)return"—";let t=new Date("".concat(e,"T00:00:00Z"));return Number.isNaN(t.getTime())?e:t.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}function f(e){let t=["B","KB","MB","GB","TB","PB"],n="number"==typeof e?e:Number(e)||0;n<0&&(n=0);let l=0;for(;n>=1024&&l<t.length-1;)n/=1024,l+=1;return"".concat(n.toFixed(0===l?0:2)," ").concat(t[l])}function p(e){if(!Number.isFinite(e)||e<=0)return"0 seconds";let t=[],n=Math.floor(e);for(let[e,l]of[["day",86400],["hour",3600],["minute",60],["second",1]]){if(n>=l){let a=Math.floor(n/l);t.push("".concat(a," ").concat(e).concat(a>1?"s":"")),n%=l}if(2===t.length)break}return t.join(", ")}function g(e,t){for(let t of[e.poll_interval_ms,e.pollIntervalMs,e.pollInterval]){if("number"==typeof t&&Number.isFinite(t))return t;if("string"==typeof t){let e=Number(t);if(Number.isFinite(e))return e}}return t}function x(e){return"number"==typeof e&&-32768!==e&&!Number.isNaN(e)}function v(e,t){let{tech:n,stat:i}=function(e){var t,n,l,a;let r=null==e?void 0:null===(n=e.cell_5G_stats_cfg)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.stat,s=null==e?void 0:null===(a=e.cell_LTE_stats_cfg)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.stat;return r&&(x(r.RSRPCurrent)||x(r.SNRCurrent))?{tech:"nr",stat:r}:s&&(x(s.RSRPCurrent)||x(s.SNRCurrent))?{tech:"lte",stat:s}:{tech:"lte",stat:void 0}}(null!=e?e:{}),d=null==i?void 0:i.RSRPCurrent,u=null==i?void 0:i.RSRQCurrent,c=null==i?void 0:i.SNRCurrent,m=function(e,t,n){if(!x(e))return 0;let l=e>=-85?4:e>=-95?3:e>=-105?2:e>=-115?1:0;return x(t)&&(t<=-16?l-=2:t<=-12&&(l-=1)),x(n)&&(n<0?l-=2:n<5?l-=1:n>=20&&(l+=1)),Math.max(0,Math.min(4,l))}(d,u,c),f=m>=3?l.Z:2===m?a.Z:1===m?r.Z:s.Z,p=n.toUpperCase(),g=t&&t.trim().length>0?t:p,v=(e,t)=>x(e)?"".concat(e," ").concat(t):"n/a",b="".concat(g," \xb7 RSRP ").concat(v(d,"dBm")," \xb7 RSRQ ").concat(v(u,"dB")," \xb7 SNR ").concat(v(c,"dB")," — ").concat(m>=4?"Excellent":3===m?"Good":2===m?"Fair":1===m?"Poor":"No signal");return{tech:n,bars:m,label:b,Icon:f,CarrierIcon:o.Z}}function b(e){var t,n,l;let a=null!==(l=null!==(n=null==e?void 0:null===(t=e.FunctionResult)||void 0===t?void 0:t.SMSList)&&void 0!==n?n:null==e?void 0:e.SMSList)&&void 0!==l?l:Array.isArray(e)?e:[];return Array.isArray(a)?a.map(e=>{var t,n,l,a,r,s,o,i,d,u;let c=null!==(n=null!==(t=e.SMSUnread)&&void 0!==t?t:e.Unread)&&void 0!==n?n:void 0!==e.Read?!S(e.Read):void 0;return{SMSID:String(null!==(a=null!==(l=e.SMSID)&&void 0!==l?l:e.id)&&void 0!==a?a:""),SMSContent:String(null!==(s=null!==(r=e.SMSContent)&&void 0!==r?r:e.Body)&&void 0!==s?s:""),SMSDateTime:String(null!==(i=null!==(o=e.SMSDateTime)&&void 0!==o?o:e.Timestamp)&&void 0!==i?i:""),SMSUnread:void 0===c||S(c),SMSSender:String(null!==(u=null!==(d=e.SMSSender)&&void 0!==d?d:e.From)&&void 0!==u?u:"")}}).filter(e=>e.SMSID.length>0).sort((e,t)=>{var n,l;return new Date(null!==(n=t.SMSDateTime)&&void 0!==n?n:0).getTime()-new Date(null!==(l=e.SMSDateTime)&&void 0!==l?l:0).getTime()}):[]}function h(e){if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){let t=e.trim().toLowerCase();if("true"===t||"on"===t||"enabled"===t)return!0;if("false"===t||"off"===t||"disabled"===t)return!1;let n=Number(t);if(!Number.isNaN(n))return 0!==n}if(e&&"object"==typeof e){if(void 0!==e.enabled)return S(e.enabled);if(void 0!==e.enable)return S(e.enable);if(void 0!==e.status_led&&void 0!==e.signal_led)return S(e.status_led)&&S(e.signal_led);if(e.LEDGlobalSts&&"object"==typeof e.LEDGlobalSts){let t=e.LEDGlobalSts;if(void 0!==t.X_ALU_COM_StatusLED_Enable&&void 0!==t.X_ALU_COM_SignalLED_Enable)return S(t.X_ALU_COM_StatusLED_Enable)&&S(t.X_ALU_COM_SignalLED_Enable)}}return null}function N(e,t){var n,l,a,r,s,o,i,d,u,c,m,f,p,g,x,v,b,h,N,_,j,w,y,k,C,M,I,D,E,T,R,P,A,F,U,q,L,z,B,Z,O,V,Q,G,H,X,W,$,K,Y,J,ee;let et=null!==(l=null!==(n=e.poll_interval_ms)&&void 0!==n?n:e.pollIntervalMs)&&void 0!==l?l:e.pollInterval,en=null!==(r=null!==(a=e.telegram)&&void 0!==a?a:e.Telegram)&&void 0!==r?r:{},el=null!==(o=null!==(s=e.long_polling)&&void 0!==s?s:e.longPolling)&&void 0!==o?o:{},ea=null!==(d=null!==(i=e.mqtt)&&void 0!==i?i:e.MQTT)&&void 0!==d?d:{},er=(()=>{var e,t,n;let l=null!==(n=null!==(t=null!==(e=en.enabled)&&void 0!==e?e:en.Enable)&&void 0!==t?t:en.isEnabled)&&void 0!==n?n:function(e){if("object"==typeof e&&null!==e){if("enabled"in e)return e.enabled;if("Enable"in e)return e.Enable;if("isEnabled"in e)return e.isEnabled}}(en);if("boolean"==typeof l)return l;if("string"==typeof l){let e=l.trim().toLowerCase();if(["1","true","yes","on"].includes(e))return!0;["0","false","no","off"].includes(e)}return!1})(),es=S(null!==(f=null!==(m=null!==(c=null!==(u=el.enabled)&&void 0!==u?u:el.Enable)&&void 0!==c?c:el.isEnabled)&&void 0!==m?m:el.active)&&void 0!==f&&f),eo=S(null!==(v=null!==(x=null!==(g=null!==(p=el.forward_sms_to_telegram)&&void 0!==p?p:el.forwardSmsToTelegram)&&void 0!==g?g:el.forward)&&void 0!==x?x:el.forwardSMS)&&void 0!==v&&v),ei=null!==(_=null!==(N=null!==(h=null!==(b=el.interval_seconds)&&void 0!==b?b:el.intervalSeconds)&&void 0!==h?h:el.interval)&&void 0!==N?N:el.periodSeconds)&&void 0!==_?_:10,ed=S(null!==(y=null!==(w=null!==(j=ea.enabled)&&void 0!==j?j:ea.Enable)&&void 0!==w?w:ea.isEnabled)&&void 0!==y&&y),eu=String(null!==(M=null!==(C=null!==(k=ea.broker)&&void 0!==k?k:ea.Broker)&&void 0!==C?C:ea.url)&&void 0!==M?M:""),ec=String(null!==(D=null!==(I=ea.client_id)&&void 0!==I?I:ea.clientId)&&void 0!==D?D:""),em=String(null!==(T=null!==(E=ea.username)&&void 0!==E?E:ea.user)&&void 0!==T?T:""),ef=String(null!==(R=ea.password)&&void 0!==R?R:""),ep=String(null!==(A=null!==(P=ea.topic_base)&&void 0!==P?P:ea.topicBase)&&void 0!==A?A:"modem/nokia");return{router_host:String(null!==(U=null!==(F=e.router_host)&&void 0!==F?F:e.routerHost)&&void 0!==U?U:""),router_user:String(null!==(L=null!==(q=e.router_user)&&void 0!==q?q:e.routerUser)&&void 0!==L?L:""),router_password:String(null!==(B=null!==(z=e.router_password)&&void 0!==z?z:e.routerPassword)&&void 0!==B?B:""),listen_host:String(null!==(O=null!==(Z=e.listen_host)&&void 0!==Z?Z:e.listenHost)&&void 0!==O?O:""),listen_port:String(null!==(Q=null!==(V=e.listen_port)&&void 0!==V?V:e.listenPort)&&void 0!==Q?Q:""),poll_interval_ms:null==et?String(t):String(et),telegram_enabled:er?"true":"false",telegram_api_base:String(null!==(X=null!==(H=null!==(G=en.api_base)&&void 0!==G?G:en.apiBase)&&void 0!==H?H:en.APIBase)&&void 0!==X?X:"https://api.telegram.org"),telegram_bot_token:String(null!==($=null!==(W=en.bot_token)&&void 0!==W?W:en.botToken)&&void 0!==$?$:""),telegram_chat_id:String(null!==(Y=null!==(K=en.chat_id)&&void 0!==K?K:en.chatId)&&void 0!==Y?Y:""),telegram_parse_mode:String(null!==(ee=null!==(J=en.parse_mode)&&void 0!==J?J:en.parseMode)&&void 0!==ee?ee:""),long_polling_enabled:es?"true":"false",long_polling_forward_sms_to_telegram:eo?"true":"false",long_polling_interval_seconds:null==ei?"10":String(ei),mqtt_enabled:ed?"true":"false",mqtt_broker:eu,mqtt_client_id:ec,mqtt_username:em,mqtt_password:ef,mqtt_topic_base:ep}}function _(e){var t,n,l,a;let r=null==e?void 0:null===(a=e.wan_conns)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:null===(n=l.ipConns)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.ExternalIPAddress;return null!=r?r:null}function S(e){if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){let t=e.trim().toLowerCase();if("true"===t||"on"===t||"enabled"===t||"yes"===t)return!0;if("false"===t||"off"===t||"disabled"===t||"no"===t)return!1;let n=Number(t);if(!Number.isNaN(n))return 0!==n}return!1}function j(e){var t,n,l;return null!==(l=null!==(n=null!==(t=null==e?void 0:e.SecurityModeEnabled)&&void 0!==t?t:null==e?void 0:e.Security)&&void 0!==n?n:null==e?void 0:e.X_ALU_COM_SecurityMode)&&void 0!==l?l:"Unknown"}function w(e){if(!e)return"Unknown time";let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function y(e,t,n){let l=Number(e);return Number.isFinite(l)&&n!==t?(Math.min(Math.max(l,t),n)-t)/(n-t)*100:0}},94508:function(e,t,n){n.d(t,{cn:function(){return r}});var l=n(61994),a=n(53335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,l.W)(t))}}}]);