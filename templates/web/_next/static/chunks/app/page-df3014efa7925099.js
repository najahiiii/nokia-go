(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{93145:function(e,a,t){Promise.resolve().then(t.bind(t,48164))},48164:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eg}});var s,l=t(57437),n=t(3274),r=t(66706),d=t(4086),i=t(24258),o=t(2265),c=t(27776),u=t(62447),m=t(30338),x=t(62483),p=t(88002),g=t(87138),h=t(87104),f=t(94693),b=t(50495),v=t(36013),j=t(37440);let N=o.forwardRef((e,a)=>{let{className:t,type:s="text",...n}=e;return(0,l.jsx)("input",{type:s,className:(0,j.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...n})});N.displayName="Input";var y=t(70571),w=t(9646);let _=o.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(w.fC,{className:(0,j.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:(0,l.jsx)(w.bU,{className:(0,j.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});_.displayName=w.fC.displayName;var S=t(19666);function C(e){let{title:a,description:t,action:s,children:n}=e;return(0,l.jsxs)(v.Zb,{className:"border-border/70 bg-card/80 text-card-foreground",children:[(0,l.jsxs)(v.Ol,{className:"flex flex-row items-start justify-between gap-4 pb-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(v.ll,{className:"text-base font-semibold leading-none text-foreground",children:a}),t?(0,l.jsx)(v.SZ,{className:"text-xs text-muted-foreground",children:t}):null]}),s?(0,l.jsx)("div",{className:"flex items-center gap-2",children:s}):null]}),(0,l.jsx)(v.aY,{className:"space-y-4 text-sm text-muted-foreground",children:n})]})}function k(e){let{data:a,ledEnabled:t,ledBusy:s,onToggleLed:n,onRenewIp:r,renewing:d,onReboot:i,rebooting:o,onOpenWanDetails:c,onExtendData:u,onCustomExpirySubmit:m,onCustomExpiryChange:x,customExpiry:p,expiryBusy:g}=e;return(0,l.jsxs)("div",{className:"grid gap-6 xl:grid-cols-[1.2fr,1fr]",children:[(0,l.jsxs)("section",{className:"grid gap-6",children:[(0,l.jsx)(M,{statusWeb:a.statusWeb,serviceData:a.serviceData,cellIdentification:a.cellIdentification,wanStatus:a.wanStatus,preloginStatus:a.preloginStatus,onOpenWanDetails:c}),(0,l.jsx)(E,{dailyUsage:a.dailyUsage}),(0,l.jsx)(P,{dataExpired:a.dataExpired,onExtendThirtyDays:()=>u(2592e3),onSubmit:m,onDateChange:x,dateValue:p,busy:g})]}),(0,l.jsxs)("section",{className:"grid gap-6",children:[(0,l.jsx)(R,{ledEnabled:t,ledBusy:s,onToggleLed:n,onRenewIp:r,renewing:d,onReboot:i,rebooting:o,onOpenWanDetails:c}),(0,l.jsx)(D,{deviceStatus:a.deviceStatus}),(0,l.jsx)(U,{wlan24:a.wlan24,wlan5:a.wlan5}),(0,l.jsx)(A,{preloginStatus:a.preloginStatus})]})]})}function M(e){var a,t,s,n,r,d,i,c,m,x,p,g,f,v,j,N,w,_,S,k,M,D,T,B,E,R,U,A,P,L;let{statusWeb:O,serviceData:q,cellIdentification:F,wanStatus:V,preloginStatus:W,onOpenWanDetails:Z}=e,H=null!==(f=null==O?void 0:null===(t=O.cell_LTE_stats_cfg)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.stat)&&void 0!==f?f:{},G=[{label:"Band",value:H.Band},{label:"PCI",value:H.PhysicalCellID},{label:"EARFCN",value:H.DownlinkEarfcn},{label:"ECI",value:H.ECI}],Y=[{label:"RSRP",value:(0,h.$2)(H.RSRPCurrent,"dBm"),percent:(0,h.gb)(H.RSRPCurrent,-140,-64)},{label:"RSRQ",value:(0,h.$2)(H.RSRQCurrent,"dB"),percent:(0,h.gb)(H.RSRQCurrent,-20,-3)},{label:"SNR",value:(0,h.$2)(H.SNRCurrent,"dB"),percent:(0,h.gb)(H.SNRCurrent,-10,30)},{label:"RSSI",value:(0,h.$2)(H.RSSICurrent,"dBm"),percent:(0,h.gb)(H.RSSICurrent,-120,-30)}],{downlink:X,uplink:Q}=(0,o.useMemo)(()=>{var e;let a=e=>Array.isArray(e)?e:e&&"object"==typeof e?Object.values(e):[],t=null!==(e=null==q?void 0:q.FunctionResult)&&void 0!==e?e:{};return{downlink:a(null==t?void 0:t.LTEDLCA),uplink:a(null==t?void 0:t.LTEULCA)}},[q]),J=(null!==(v=null==X?void 0:X.length)&&void 0!==v?v:0)>0||(null!==(j=null==Q?void 0:Q.length)&&void 0!==j?j:0)>0,$=null!==(_=null!==(w=null!==(N=null==F?void 0:null===(s=F.FunctionResult)||void 0===s?void 0:s.Name)&&void 0!==N?N:null==F?void 0:F.Name)&&void 0!==w?w:null==F?void 0:null===(n=F.functionResult)||void 0===n?void 0:n.Name)&&void 0!==_?_:null,K=null!==(S=null==W?void 0:null===(i=W.wan_conns)||void 0===i?void 0:null===(d=i[0])||void 0===d?void 0:null===(r=d.ipConns)||void 0===r?void 0:r[0])&&void 0!==S?S:{},ee=null!==(k=null==V?void 0:null===(x=V.wan_conns)||void 0===x?void 0:null===(m=x[0])||void 0===m?void 0:null===(c=m.ipConns)||void 0===c?void 0:c[0])&&void 0!==k?k:{},ea=null!==(M=(0,h.SR)(W))&&void 0!==M?M:"—",et=null!==(T=null!==(D=ee.X_CT_COM_IPv6IPAddress)&&void 0!==D?D:K.X_CT_COM_IPv6IPAddress)&&void 0!==T?T:"—",es=null!==(B=null==K?void 0:K.DNSServers)&&void 0!==B?B:"—",el=null!==(E=null==K?void 0:K.X_CT_COM_IPv6DNSServers)&&void 0!==E?E:"—",en=null!==(U=null!==(R=ee.DefaultGateway)&&void 0!==R?R:K.DefaultGateway)&&void 0!==U?U:"—",er=null!==(P=null!==(A=ee.ConnectionStatus)&&void 0!==A?A:K.ConnectionStatus)&&void 0!==P?P:"Unknown",ed=null!==(L=null==W?void 0:null===(g=W.device_cfg)||void 0===g?void 0:null===(p=g[0])||void 0===p?void 0:p.X_ALU_COM_LastActiveTime)&&void 0!==L?L:null,ei=(0,h._o)(ed),eo="string"==typeof ed&&""!==ed.trim()&&"—"!==ei&&ei!==ed?"".concat(ei," • ").concat(ed):ei;return(0,l.jsxs)(C,{title:null!=$?$:"LTE Signal",description:"Signal quality, carrier aggregation, and WAN connection summary",action:(0,l.jsx)(b.z,{variant:"link",size:"sm",onClick:Z,className:"px-0",children:"View details"}),children:[(0,l.jsxs)(u.fC,{defaultValue:"signal",className:"space-y-3",children:[(0,l.jsxs)(u.aV,{className:"inline-flex w-full items-center gap-1 rounded-lg border border-neutral-800 bg-neutral-900/60 p-0.5 text-xs font-semibold uppercase tracking-wide",children:[(0,l.jsx)(u.xz,{value:"signal",className:"flex-1 rounded-md px-3 py-1 text-neutral-400 transition hover:text-white data-[state=active]:bg-neutral-800 data-[state=active]:text-white",children:"Signal"}),(0,l.jsx)(u.xz,{value:"ca",className:"flex-1 rounded-md px-3 py-1 text-neutral-400 transition hover:text-white data-[state=active]:bg-neutral-800 data-[state=active]:text-white",children:"Carrier Agg."})]}),(0,l.jsxs)(u.VY,{value:"signal",className:"space-y-3",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 gap-2 text-sm text-neutral-400",children:(0,l.jsx)("span",{className:"font-semibold text-neutral-500",children:"Main Signal"})}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-400",children:G.map(e=>{let{label:a,value:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"font-semibold text-neutral-500",children:a}),(0,l.jsx)("span",{className:"text-sm text-neutral-200",children:null!=t?t:"—"})]},a)})}),(0,l.jsx)("hr",{className:"border-neutral-800"}),(0,l.jsx)("div",{className:"space-y-3 text-xs text-neutral-400",children:Y.map(e=>{let{label:a,value:t,percent:s}=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-1.5 flex items-center justify-between",children:[(0,l.jsx)("span",{className:"font-semibold text-neutral-500",children:a}),(0,l.jsx)("span",{className:"text-sm text-neutral-200",children:t})]}),(0,l.jsx)(y.E,{value:s,className:"h-1.5 bg-neutral-800"})]},a)})})]}),(0,l.jsx)(u.VY,{value:"ca",className:"space-y-3",children:J?(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(I,{title:"Downlink",carriers:X}),(0,l.jsx)(I,{title:"Uplink",carriers:Q})]}):(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"Carrier aggregation data is not available."})})]}),(0,l.jsx)("div",{className:"space-y-3 text-xs text-muted-foreground",children:(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(z,{label:"External IPv4",value:ea}),(0,l.jsx)(z,{label:"External IPv6",value:et}),(0,l.jsx)(z,{label:"Gateway",value:en}),(0,l.jsx)(z,{label:"DNSv4",value:es}),(0,l.jsx)(z,{label:"DNSv6",value:el}),(0,l.jsx)(z,{label:"Status",value:er}),(0,l.jsx)(z,{label:"Session",value:eo})]})})]})}function D(e){var a,t,s,n,r,d,i;let{deviceStatus:o}=e,c=null!==(n=null==o?void 0:o.UpTime)&&void 0!==n?n:0,u=null!==(r=null==o?void 0:null===(a=o.cpu_usageinfo)||void 0===a?void 0:a.CPUUsage)&&void 0!==r?r:null,m=null!==(d=null==o?void 0:null===(t=o.mem_info)||void 0===t?void 0:t.Total)&&void 0!==d?d:0,x=null!==(i=null==o?void 0:null===(s=o.mem_info)||void 0===s?void 0:s.Free)&&void 0!==i?i:0,p=m>0?Math.round((m-x)/m*100):0;return(0,l.jsx)(C,{title:"Device Health",description:"Runtime statistics reported by the modem",children:(0,l.jsxs)("div",{className:"grid gap-3",children:[(0,l.jsx)(z,{label:"Uptime",value:(0,h.d5)(c)}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"CPU Usage"}),(0,l.jsxs)(f.C,{variant:"outline",className:"font-semibold",children:[u,"%"]})]}),(0,l.jsx)(y.E,{value:u,className:"h-2"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Memory Usage"}),(0,l.jsxs)(f.C,{variant:"outline",className:"font-semibold",children:[p,"%"]})]}),(0,l.jsx)(y.E,{value:p,className:"h-2"})]})]})})}function T(e){if(0===e.length)return{rows:[],totals:{download:"0 B",upload:"0 B",combined:"0 B"}};let a=e.reduce((e,a)=>e+a.downloadBytes,0),t=e.reduce((e,a)=>e+a.uploadBytes,0),s=e.reduce((e,a)=>e+a.combinedBytes,0);return{rows:e.map((a,t)=>{let l=e[t+1],n=B(a.combinedBytes,null==l?void 0:l.combinedBytes,null==l?void 0:l.label),r=B(a.downloadBytes,null==l?void 0:l.downloadBytes,null==l?void 0:l.label),d=B(a.uploadBytes,null==l?void 0:l.uploadBytes,null==l?void 0:l.label);return{key:a.key,label:a.label,download:(0,h.td)(a.downloadBytes),upload:(0,h.td)(a.uploadBytes),combined:(0,h.td)(a.combinedBytes),share:(0,h.rl)(s>0?a.combinedBytes/s*100:0),downloadBytes:a.downloadBytes,uploadBytes:a.uploadBytes,combinedBytes:a.combinedBytes,previousCombinedBytes:null==l?void 0:l.combinedBytes,downloadTrend:r,uploadTrend:d,trend:n}}),totals:{download:(0,h.td)(a),upload:(0,h.td)(t),combined:(0,h.td)(s)}}}function B(e,a,t){let s,n,r;if(null==a)return null;let d=e-a,i=0===d?"flat":d>0?"up":"down",o=Math.abs(d),c=a>0?o/a*100:null,u="down"===i?"-":"up"===i?"+":"",g="flat"===i?"0":"".concat(u).concat((0,h.td)(o)),f=null===c||"flat"===i?void 0:"".concat(u).concat(c.toFixed(1),"%");"up"===i?(s=(0,l.jsx)(m.Z,{className:"h-3.5 w-3.5 text-emerald-400"}),n="text-emerald-400",r="Naik"):"down"===i?(s=(0,l.jsx)(x.Z,{className:"h-3.5 w-3.5 text-rose-400"}),n="text-rose-400",r="Turun"):(s=(0,l.jsx)(p.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),n="text-muted-foreground",r="Tidak berubah");let b=null!=t?t:"periode sebelumnya",v="flat"===i?"".concat(r," dibanding ").concat(b):"".concat(r," ").concat((0,h.td)(o)).concat(f?" (".concat(f,")"):""," dibanding ").concat(b);return{icon:s,deltaLabel:g,percentLabel:f,className:n,tooltip:v,previousLabel:b}}function E(e){let{dailyUsage:a}=e,t=(0,o.useMemo)(()=>Array.isArray(null==a?void 0:a.daily_data)?a.daily_data:Array.isArray(null==a?void 0:a.last_7_days)?a.last_7_days:[],[a]),s=(0,o.useMemo)(()=>t.map(e=>{var a,t,s,l,n,r;let d=null==e?void 0:e.date;if(!d)return null;let i=new Date("".concat(d,"T00:00:00Z"));return Number.isNaN(i.getTime())?null:{key:d,date:i,downloadBytes:null!==(l=null==e?void 0:null===(a=e.download)||void 0===a?void 0:a.raw_bytes)&&void 0!==l?l:0,uploadBytes:null!==(n=null==e?void 0:null===(t=e.upload)||void 0===t?void 0:t.raw_bytes)&&void 0!==n?n:0,combinedBytes:null!==(r=null==e?void 0:null===(s=e.combined)||void 0===s?void 0:s.raw_bytes)&&void 0!==r?r:0}}).filter(e=>null!==e).sort((e,a)=>a.date.getTime()-e.date.getTime()),[t]),n=(0,o.useMemo)(()=>s.slice(0,7).map(e=>({key:e.key,label:(0,h.p6)(e.key),sortValue:e.date.getTime(),downloadBytes:e.downloadBytes,uploadBytes:e.uploadBytes,combinedBytes:e.combinedBytes})),[s]),r=(0,o.useMemo)(()=>{let e=new Map;return s.forEach(a=>{let t=function(e){let a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),t=a.getUTCDay();return a.setUTCDate(a.getUTCDate()-(t+6)%7),a}(a.date),s=new Date(t);s.setUTCDate(s.getUTCDate()+6);let l=t.toISOString().slice(0,10);e.has(l)||e.set(l,{key:l,label:"".concat((0,h.p6)(l)," – ").concat((0,h.p6)(s.toISOString().slice(0,10))),sortValue:t.getTime(),downloadBytes:0,uploadBytes:0,combinedBytes:0});let n=e.get(l);n.downloadBytes+=a.downloadBytes,n.uploadBytes+=a.uploadBytes,n.combinedBytes+=a.combinedBytes}),Array.from(e.values()).sort((e,a)=>a.sortValue-e.sortValue).slice(0,8)},[s]),d=(0,o.useMemo)(()=>{let e=new Map;return s.forEach(a=>{var t;let s=new Date(Date.UTC((t=a.date).getUTCFullYear(),t.getUTCMonth(),1)),l="".concat(s.getUTCFullYear(),"-").concat(String(s.getUTCMonth()+1).padStart(2,"0"));e.has(l)||e.set(l,{key:l,label:s.toLocaleDateString("id-ID",{month:"long",year:"numeric"}),sortValue:s.getTime(),downloadBytes:0,uploadBytes:0,combinedBytes:0});let n=e.get(l);n.downloadBytes+=a.downloadBytes,n.uploadBytes+=a.uploadBytes,n.combinedBytes+=a.combinedBytes}),Array.from(e.values()).sort((e,a)=>a.sortValue-e.sortValue).slice(0,12)},[s]),i=(0,o.useMemo)(()=>T(n),[n]),c=(0,o.useMemo)(()=>T(r),[r]),m=(0,o.useMemo)(()=>T(d),[d]),x=(0,o.useMemo)(()=>{if(s.length<2)return null;let[e,a]=s;return B(e.combinedBytes,a.combinedBytes,(0,h.p6)(a.key))},[s]),p=(0,o.useMemo)(()=>{if(r.length<2)return null;let[e,a]=r;return B(e.combinedBytes,a.combinedBytes,a.label)},[r]),g=(0,o.useMemo)(()=>{if(d.length<2)return null;let[e,a]=d;return B(e.combinedBytes,a.combinedBytes,a.label)},[d]),f=(0,o.useMemo)(()=>[{key:"daily",label:"Harian",dataset:i,emptyMessage:"Belum ada data harian yang terekam."},{key:"weekly",label:"Mingguan",dataset:c,emptyMessage:"Belum ada agregasi mingguan yang tersedia."},{key:"monthly",label:"Bulanan",dataset:m,emptyMessage:"Belum ada agregasi bulanan yang tersedia."}],[i,c,m]);return(0,l.jsx)(C,{title:"Data Usage",description:"Breakdown of modem traffic across daily, weekly, and monthly windows",action:(0,l.jsx)(O,{href:"/report",children:"Full report"}),children:(0,l.jsxs)(u.fC,{defaultValue:"daily",className:"space-y-4",children:[(0,l.jsx)(u.aV,{className:"inline-flex w-full items-center gap-1 rounded-lg border border-border/70 bg-muted/20 p-0.5 text-xs font-semibold uppercase tracking-wide",children:f.map(e=>(0,l.jsx)(u.xz,{value:e.key,className:"flex-1 rounded-md px-3 py-1 text-muted-foreground transition hover:text-foreground data-[state=active]:bg-muted data-[state=active]:text-foreground",children:e.label},e.key))}),f.map(e=>{let a="daily"===e.key?x:"weekly"===e.key?p:g;return(0,l.jsxs)(u.VY,{value:e.key,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs text-muted-foreground",children:[(0,l.jsx)(L,{label:"Download",value:e.dataset.totals.download,tone:"blue",customClass:"text-center"}),(0,l.jsx)(L,{label:"Upload",value:e.dataset.totals.upload,tone:"green",customClass:"text-center"}),(0,l.jsx)(L,{label:"Total",value:e.dataset.totals.combined,tone:"neutral",customClass:"text-center"})]}),a?(0,l.jsxs)("div",{className:"flex gap-1 rounded-lg border border-border/60 bg-muted/30 px-3 py-2 text-xs flex-row items-center justify-between",children:[(0,l.jsxs)(S.u,{children:[(0,l.jsx)(S.aJ,{asChild:!0,children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[a.icon,(0,l.jsxs)("span",{className:"font-semibold ".concat(a.className),children:[a.deltaLabel,a.percentLabel?" (".concat(a.percentLabel,")"):""]})]})}),(0,l.jsx)(S._v,{children:a.tooltip})]}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:["Dibanding ",a.previousLabel]})]}):null,(0,l.jsx)("div",{className:"overflow-hidden rounded-lg border border-border/50",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-border/60 text-xs sm:text-sm",children:[(0,l.jsx)("thead",{className:"bg-muted/50 text-muted-foreground",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Periode"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Download"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Upload"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Total"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-border/60 text-foreground",children:0===e.dataset.rows.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-xs text-muted-foreground",children:e.emptyMessage})}):e.dataset.rows.map(a=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-4 py-2",children:a.label}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:a.downloadTrend?(0,l.jsxs)(S.u,{children:[(0,l.jsx)(S.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:a.downloadTrend.className,children:a.downloadTrend.icon}),(0,l.jsx)("span",{className:"text-blue-400",children:a.download})]})}),(0,l.jsx)(S._v,{children:a.downloadTrend.tooltip})]}):(0,l.jsx)("span",{className:"text-blue-400",children:a.download})}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:a.uploadTrend?(0,l.jsxs)(S.u,{children:[(0,l.jsx)(S.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:a.uploadTrend.className,children:a.uploadTrend.icon}),(0,l.jsx)("span",{className:"text-emerald-400",children:a.upload})]})}),(0,l.jsx)(S._v,{children:a.uploadTrend.tooltip})]}):(0,l.jsx)("span",{className:"text-emerald-400",children:a.upload})}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:a.trend?(0,l.jsxs)(S.u,{children:[(0,l.jsx)(S.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:a.trend.className,children:a.trend.icon}),a.combined]})}),(0,l.jsx)(S._v,{children:a.trend.tooltip})]}):(0,l.jsx)("span",{className:"inline-flex justify-end",children:a.combined})})]},"".concat(e.key,"-").concat(a.key)))})]})})]},e.key)})]})})}function I(e){let{title:a,carriers:t}=e;return t&&0!==t.length?(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:a}),(0,l.jsx)("ul",{className:"mt-3 space-y-3 text-xs text-muted-foreground",children:t.map((e,t)=>{var s,n,r,d;return(0,l.jsx)("li",{className:"rounded-lg border border-border/60 bg-muted/40 p-3",children:(0,l.jsxs)("div",{className:"grid grid-cols-[1fr,auto] gap-2",children:[(0,l.jsx)("span",{children:"Band"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(s=e.ScellBand)&&void 0!==s?s:"—"}),(0,l.jsx)("span",{children:"Bandwidth"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(n=e.ScellBandwidth)&&void 0!==n?n:"—"}),(0,l.jsx)("span",{children:"PCI"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(r=e.PhysicalCellID)&&void 0!==r?r:"—"}),(0,l.jsx)("span",{children:"EARFCN"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(d=e.ScellChannel)&&void 0!==d?d:"—"})]})},"".concat(a,"-").concat(t))})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:a}),(0,l.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"No carriers detected."})]})}function R(e){let{ledEnabled:a,ledBusy:t,onToggleLed:s,onRenewIp:n,renewing:r,onReboot:d,rebooting:i,onOpenWanDetails:o}=e;return(0,l.jsx)(C,{title:"Controls & Actions",description:"Operate modem features and shortcuts",children:(0,l.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"Device LEDs"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Toggle the enclosure indicators for a quieter environment."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(f.C,{variant:"outline",className:"text-xs",children:null===a?"Unknown":a?"Enabled":"Disabled"}),(0,l.jsx)(_,{checked:!!a,onCheckedChange:e=>s(e),disabled:t,"aria-label":"Toggle device LEDs"})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(b.z,{onClick:n,disabled:r,className:"w-full justify-start",children:r?"Renewing…":"Renew WAN IP"}),(0,l.jsx)(b.z,{onClick:d,disabled:i,variant:"destructive",className:"w-full justify-start",children:i?"Rebooting…":"Reboot modem"}),(0,l.jsx)(b.z,{variant:"outline",onClick:o,className:"w-full justify-start",children:"WAN details"})]})]})})}function U(e){var a,t,s,n,r,d;let{wlan24:i,wlan5:o}=e,c=[{label:"2.4 GHz",config:null!==(n=null==i?void 0:null===(a=i.wlan_config_glb)||void 0===a?void 0:a[0])&&void 0!==n?n:null},{label:"5 GHz",config:null!==(d=null!==(r=null==o?void 0:null===(t=o.wlan_config_glb11ac)||void 0===t?void 0:t[0])&&void 0!==r?r:null==o?void 0:null===(s=o.wlan_config_glb)||void 0===s?void 0:s[0])&&void 0!==d?d:null}];return(0,l.jsx)(C,{title:"Wi-Fi Radios",description:"SSID, channel, and security overview",children:(0,l.jsx)("div",{className:"space-y-3 text-sm text-muted-foreground",children:c.map(e=>{var a,t,s,n;let{label:r,config:d}=e,i=(0,h.sw)(null==d?void 0:d.Enable);return(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-foreground",children:null!==(a=null==d?void 0:d.SSID)&&void 0!==a?a:"—"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:r})]}),(0,l.jsx)(f.C,{variant:i?"secondary":"outline",className:i?"bg-emerald-500/15 text-emerald-400":"text-muted-foreground",children:i?"Enabled":"Disabled"})]}),(0,l.jsxs)("dl",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{children:"Mode"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(t=null==d?void 0:d.X_ALU_COM_Mode)&&void 0!==t?t:"—"})]}),(0,l.jsxs)("div",{className:"ml-auto text-right",children:[(0,l.jsx)("dt",{children:"Channel"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(s=null==d?void 0:d.Channel)&&void 0!==s?s:"Auto"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{children:"Bandwidth"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(n=null==d?void 0:d.X_ALU_COM_Bandwidth)&&void 0!==n?n:"—"})]}),(0,l.jsxs)("div",{className:"ml-auto text-right",children:[(0,l.jsx)("dt",{children:"Security"}),(0,l.jsx)("dd",{className:"text-foreground",children:(0,h.FM)(d)})]})]})]},r)})})})}function A(e){let{preloginStatus:a}=e,t=(Array.isArray(null==a?void 0:a.device_cfg)?a.device_cfg:[]).filter(e=>1===e.Active),s=t.filter(e=>"Ethernet"===e.InterfaceType).length,n=t.filter(e=>"Ethernet"!==e.InterfaceType).length,r=t.slice(0,6).map(e=>{var a,t,s;return{id:null!==(s=null!==(t=null!==(a=e.MACAddress)&&void 0!==a?a:e.ID)&&void 0!==t?t:e.HostName)&&void 0!==s?s:Math.random().toString(36),name:e.HostName||e.Alias||"Unknown device",ip:e.IPAddress||"—",iface:e.InterfaceType||"Unknown"}});return(0,l.jsxs)(C,{title:"Connected Devices",description:"Active clients reported by the modem",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center text-sm text-muted-foreground",children:[(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Ethernet"}),(0,l.jsx)("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:s})]}),(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Wi-Fi"}),(0,l.jsx)("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:n})]})]}),(0,l.jsx)("div",{className:"mt-4 space-y-2 text-xs",children:0===r.length?(0,l.jsx)("p",{className:"text-muted-foreground",children:"No active clients detected."}):r.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 px-3 py-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-foreground",children:e.name}),(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:e.ip})]}),(0,l.jsx)(f.C,{variant:"outline",className:"text-[11px] uppercase",children:e.iface})]},e.id))})]})}function P(e){let{dataExpired:a,onExtendThirtyDays:t,onSubmit:s,onDateChange:n,dateValue:r,busy:d}=e,i=(0,o.useMemo)(()=>{if(!a)return{label:"Not configured",tone:"neutral"};let e=new Date(1e3*a),t=new Date,s=Math.floor((e.getTime()-t.getTime())/864e5);return s<0?{label:"".concat((0,h.p6)(e.toISOString().slice(0,10))," (expired ").concat(Math.abs(s)," day").concat(-1===s?"":"s"," ago)"),tone:"danger"}:s<=3?{label:"".concat((0,h.p6)(e.toISOString().slice(0,10))," (").concat(s," day").concat(1===s?"":"s"," remaining)"),tone:"warning"}:{label:"".concat((0,h.p6)(e.toISOString().slice(0,10))," (").concat(s," day").concat(1===s?"":"s"," remaining)"),tone:"success"}},[a]),c="danger"===i.tone?"text-red-400":"warning"===i.tone?"text-yellow-400":"success"===i.tone?"text-green-400":"text-neutral-300";return(0,l.jsxs)(C,{title:"Data Expiration",description:"Manage how long modem traffic counters remain valid",children:[(0,l.jsx)("p",{className:"text-sm font-semibold ".concat(c),children:i.label}),(0,l.jsxs)("form",{className:"mt-4 space-y-4",onSubmit:s,children:[(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Expiration date"}),(0,l.jsx)(N,{type:"date",value:r,onChange:e=>n(e.target.value),disabled:d})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(b.z,{type:"button",onClick:t,disabled:d,variant:"secondary",className:"w-full",children:"Extend 30 Days"}),(0,l.jsx)(b.z,{type:"submit",disabled:d||!r,className:"w-full",children:"Save Date"})]})]})]})}function z(e){let{label:a,value:t,highlight:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,l.jsx)("span",{className:"font-semibold",children:a}),(0,l.jsx)("span",{className:s?"text-foreground":"text-muted-foreground",children:t})]})}function L(e){let{label:a,value:t,tone:s,customClass:n}=e;return(0,l.jsxs)("div",{className:"flex h-full flex-col justify-center ".concat(n),children:[(0,l.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:a}),(0,l.jsx)("p",{className:"mt-1 text-base font-semibold ".concat("blue"===s?"text-blue-400":"green"===s?"text-emerald-400":"text-foreground"),children:t})]})}function O(e){let{href:a,children:t}=e;return(0,l.jsx)(b.z,{asChild:!0,variant:"outline",size:"sm",className:"gap-2",children:(0,l.jsx)(g.default,{href:a,children:t})})}var q=t(47019),F=t(75733),V=t(64756),W=t(42421);let Z=V.fC,H=o.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(V.ck,{ref:a,className:(0,j.cn)("border-b",t),...s})});H.displayName="AccordionItem";let G=o.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,l.jsx)(V.h4,{className:"flex",children:(0,l.jsxs)(V.xz,{ref:a,className:(0,j.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...n,children:[s,(0,l.jsx)(W.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});G.displayName=V.xz.displayName;let Y=o.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,l.jsx)(V.VY,{ref:a,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,l.jsx)("div",{className:(0,j.cn)("pb-4 pt-0",t),children:s})})});Y.displayName=V.VY.displayName;var X=t(13304);let Q=X.fC;X.xz;let J=X.h_;X.x8;let $=o.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(X.aV,{ref:a,className:(0,j.cn)("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",t),...s})});$.displayName=X.aV.displayName;let K=o.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,l.jsxs)(J,{children:[(0,l.jsx)($,{}),(0,l.jsx)(X.VY,{ref:a,className:(0,j.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-[calc(100vw-3rem)] -translate-x-1/2 -translate-y-1/2 gap-6 rounded-lg border border-border bg-background p-6 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-90 data-[state=closed]:zoom-out-95 sm:max-w-3xl sm:p-8",t),...n,children:s})]})});K.displayName=X.VY.displayName;let ee=e=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:(0,j.cn)("flex flex-col space-y-2 text-left",a),...t})};ee.displayName="DialogHeader";let ea=o.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(X.Dx,{ref:a,className:(0,j.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});ea.displayName=X.Dx.displayName;let et=o.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(X.dk,{ref:a,className:(0,j.cn)("text-sm text-muted-foreground",t),...s})});et.displayName=X.dk.displayName;let es=e=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:(0,j.cn)("space-y-4 text-sm",a),...t})};es.displayName="DialogBody";let el=e=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:(0,j.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})};el.displayName="DialogFooter";var en=t(2286);let er=o.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,l.jsxs)(en.fC,{ref:a,className:(0,j.cn)("relative overflow-hidden",t),...n,children:[(0,l.jsx)(en.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,l.jsx)(ed,{}),(0,l.jsx)(en.Ns,{})]})});er.displayName=en.fC.displayName;let ed=o.forwardRef((e,a)=>{let{className:t,orientation:s="vertical",...n}=e;return(0,l.jsx)(en.gb,{ref:a,orientation:s,className:(0,j.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:(0,l.jsx)(en.q4,{className:"relative flex-1 rounded-full bg-border"})})});function ei(e){var a,t;let{open:s,onClose:n,messages:r,busy:d,onRefresh:i,onMarkRead:o,onDelete:c,selectedSmsId:u,onSelect:m}=e,x=null!==(t=null!==(a=r.find(e=>e.SMSID===u))&&void 0!==a?a:r[0])&&void 0!==t?t:null;return(0,l.jsx)(Q,{open:s,onOpenChange:e=>{e||n()},children:(0,l.jsxs)(K,{children:[(0,l.jsxs)(ee,{children:[(0,l.jsx)(ea,{children:"SMS Inbox"}),(0,l.jsxs)(et,{children:[r.length," message",1===r.length?"":"s"," stored on the modem."]})]}),(0,l.jsx)(es,{children:(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,260px),minmax(0,1fr)] lg:max-h-[70vh]",children:[(0,l.jsx)(er,{className:"min-h-[220px] max-h-[50vh] rounded-md border border-border bg-muted/20 lg:h-[60vh] lg:max-h-none",children:0===r.length?(0,l.jsx)("p",{className:"px-4 py-6 text-sm text-muted-foreground",children:"Inbox is empty."}):(0,l.jsx)("ul",{className:"text-sm",children:r.map(e=>(0,l.jsxs)("li",{onClick:()=>m(e.SMSID),className:"cursor-pointer border-b border-border/60 px-4 py-3 transition hover:bg-muted ".concat(e.SMSID===(null==x?void 0:x.SMSID)?"bg-muted/60":""),children:[(0,l.jsx)("p",{className:"font-semibold ".concat(e.SMSUnread?"text-foreground":"text-muted-foreground"),children:e.SMSSender||"Unknown sender"}),(0,l.jsx)("p",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:e.SMSContent||"(empty message)"}),(0,l.jsx)("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-muted-foreground/80",children:(0,h.F1)(e.SMSDateTime)})]},e.SMSID))})}),(0,l.jsx)("section",{className:"flex min-h-[220px] max-h-[50vh] flex-col gap-4 rounded-md border border-border bg-muted/10 p-4 lg:h-[60vh] lg:max-h-none",children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:x.SMSSender||"Unknown sender"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.F1)(x.SMSDateTime)})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(b.z,{variant:"outline",size:"sm",onClick:()=>o(x,!x.SMSUnread),disabled:d,children:x.SMSUnread?"Mark as read":"Mark as unread"}),(0,l.jsx)(b.z,{variant:"destructive",size:"sm",onClick:()=>c(x.SMSID),disabled:d,children:"Delete"})]})]}),(0,l.jsx)(er,{className:"flex-1 rounded-md border border-border bg-background p-4",children:(0,l.jsx)("p",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:x.SMSContent||"(empty message)"})})]}):(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a message on the left to read its contents."})})]})}),(0,l.jsxs)(el,{className:"gap-2",children:[(0,l.jsx)(b.z,{variant:"outline",onClick:i,disabled:d,children:"Refresh"}),(0,l.jsx)(b.z,{variant:"ghost",onClick:n,children:"Close"})]})]})})}function eo(e){var a,t;let{open:s,onClose:n,draft:r,onChange:d,onSubmit:i,saving:c}=e,[u,m]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1);if(!s||!r)return null;let g="true"===r.telegram_enabled,h="true"===r.long_polling_enabled,f="true"===r.long_polling_forward_sms_to_telegram,v="true"===r.mqtt_enabled;return(0,l.jsx)(Q,{open:s,onOpenChange:e=>{e||n()},children:(0,l.jsxs)(K,{children:[(0,l.jsxs)(ee,{children:[(0,l.jsx)(ea,{children:"Edit Configuration"}),(0,l.jsx)(et,{children:"Update modem credentials, listener address, and optional Telegram bridge."})]}),(0,l.jsxs)("form",{className:"space-y-6",onSubmit:i,children:[(0,l.jsxs)(es,{className:"max-h-[65vh] space-y-6 overflow-y-auto pr-1 text-sm",children:[(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Host"}),(0,l.jsx)(N,{value:r.router_host,onChange:e=>d("router_host",e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem User"}),(0,l.jsx)(N,{value:r.router_user,onChange:e=>d("router_user",e.target.value)})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Password"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(N,{type:u?"text":"password",value:r.router_password,onChange:e=>d("router_password",e.target.value),className:"pr-10"}),(0,l.jsx)(b.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>m(e=>!e),className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":u?"Hide password":"Show password",children:u?(0,l.jsx)(q.Z,{className:"h-4 w-4"}):(0,l.jsx)(F.Z,{className:"h-4 w-4"})})]})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Host"}),(0,l.jsx)(N,{value:r.listen_host,onChange:e=>d("listen_host",e.target.value),required:!0})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Port"}),(0,l.jsx)(N,{value:r.listen_port,onChange:e=>d("listen_port",e.target.value),required:!0})]})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval (ms)"}),(0,l.jsx)(N,{value:null!==(a=r.poll_interval_ms)&&void 0!==a?a:"",onChange:e=>d("poll_interval_ms",e.target.value),inputMode:"numeric",pattern:"[0-9]*"})]})]}),(0,l.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Server Polling"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable backend polling of the modem for SMS forwarding and similar tasks."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Enabled"}),(0,l.jsx)(_,{checked:h,onCheckedChange:e=>d("long_polling_enabled",e?"true":"false"),"aria-label":"Toggle server polling"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval (seconds)"}),(0,l.jsx)(N,{value:null!==(t=r.long_polling_interval_seconds)&&void 0!==t?t:"",onChange:e=>d("long_polling_interval_seconds",e.target.value),disabled:!h,inputMode:"numeric",pattern:"[0-9]*",placeholder:"10"}),(0,l.jsx)("span",{className:"text-[11px] text-muted-foreground",children:"Must be at least 5 seconds. Defaults to 10 seconds."})]}),(0,l.jsx)(Z,{type:"single",collapsible:!0,className:"rounded-md border border-input bg-background text-muted-foreground sm:col-span-2",children:(0,l.jsxs)(H,{value:"mqtt",children:[(0,l.jsx)(G,{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"MQTT Publishing"}),(0,l.jsxs)(Y,{className:"space-y-3 border-t border-border px-3 pb-3 pt-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Push polling updates to MQTT topics. Expand to configure broker credentials."}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Enabled"}),(0,l.jsx)(_,{checked:v,onCheckedChange:e=>d("mqtt_enabled",e?"true":"false"),disabled:!h,"aria-label":"Toggle MQTT publishing"})]}),!h&&(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to configure MQTT publishing."}),(0,l.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Broker URL"}),(0,l.jsx)(N,{value:r.mqtt_broker,onChange:e=>d("mqtt_broker",e.target.value),disabled:!v||!h,placeholder:"mqtt://localhost:1883"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Client ID"}),(0,l.jsx)(N,{value:r.mqtt_client_id,onChange:e=>d("mqtt_client_id",e.target.value),disabled:!v||!h,placeholder:"nokia-router-client"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Username"}),(0,l.jsx)(N,{value:r.mqtt_username,onChange:e=>d("mqtt_username",e.target.value),disabled:!v||!h,placeholder:"mqtt-user"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Password"}),(0,l.jsx)(N,{type:"password",value:r.mqtt_password,onChange:e=>d("mqtt_password",e.target.value),disabled:!v||!h,placeholder:"••••••••"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground sm:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Topic base"}),(0,l.jsx)(N,{value:r.mqtt_topic_base,onChange:e=>d("mqtt_topic_base",e.target.value),disabled:!v||!h,placeholder:"modem/nokia"})]})]})]})]})})]})]}),(0,l.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Telegram Bridge"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure optional Telegram notifications via bot API."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Enabled"}),(0,l.jsx)(_,{checked:g,onCheckedChange:e=>d("telegram_enabled",e?"true":"false"),"aria-label":"Toggle Telegram notifications"})]})]}),(0,l.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"API Base"}),(0,l.jsx)(N,{value:r.telegram_api_base,onChange:e=>d("telegram_api_base",e.target.value),disabled:!g,placeholder:"https://api.telegram.org"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Bot Token"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(N,{type:x?"text":"password",value:r.telegram_bot_token,onChange:e=>d("telegram_bot_token",e.target.value),disabled:!g,placeholder:"123456:ABC-DEF...",className:"pr-10"}),(0,l.jsx)(b.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(e=>!e),disabled:!g,className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":x?"Hide bot token":"Show bot token",children:x?(0,l.jsx)(q.Z,{className:"h-4 w-4"}):(0,l.jsx)(F.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Default Chat ID"}),(0,l.jsx)(N,{value:r.telegram_chat_id,onChange:e=>d("telegram_chat_id",e.target.value),disabled:!g,placeholder:"123456789"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Parse Mode"}),(0,l.jsxs)("select",{value:r.telegram_parse_mode,onChange:e=>d("telegram_parse_mode",e.target.value),disabled:!g,className:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[(0,l.jsx)("option",{value:"",children:"None"}),(0,l.jsx)("option",{value:"Markdown",children:"Markdown"}),(0,l.jsx)("option",{value:"MarkdownV2",children:"MarkdownV2"}),(0,l.jsx)("option",{value:"HTML",children:"HTML"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Forward SMS to Telegram"}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-md border border-input bg-background px-3 py-2 text-xs shadow-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Use server polling to push unread SMS messages to Telegram."}),(0,l.jsx)(_,{checked:f,onCheckedChange:e=>d("long_polling_forward_sms_to_telegram",e?"true":"false"),disabled:!g||!h,"aria-label":"Toggle forwarding SMS to Telegram",title:h?void 0:"Enable server polling to forward SMS to Telegram."})]}),!h&&(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to forward SMS messages to Telegram."})]})]})]})]}),(0,l.jsxs)(el,{className:"gap-2",children:[(0,l.jsx)(b.z,{type:"button",variant:"outline",disabled:c,onClick:n,children:"Cancel"}),(0,l.jsx)(b.z,{type:"submit",disabled:c,children:c?"Saving…":"Save changes"})]})]})]})})}function ec(e){var a,t,s,n,r,d,i,o,c,u,m,x,p,g,f,v,j,N,y,w,_,S;let{open:C,onClose:k,preloginStatus:M,wanStatus:D}=e;if(!C)return null;let T=null!==(u=null==M?void 0:null===(s=M.wan_conns)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:null===(a=t.ipConns)||void 0===a?void 0:a[0])&&void 0!==u?u:{},B=null!==(m=null==M?void 0:null===(n=M.root_info)||void 0===n?void 0:n[0])&&void 0!==m?m:{},E=null!==(x=null==D?void 0:null===(i=D.wan_conns)||void 0===i?void 0:null===(d=i[0])||void 0===d?void 0:null===(r=d.ipConns)||void 0===r?void 0:r[0])&&void 0!==x?x:{},I=null!==(g=null!==(p=E.DefaultGateway)&&void 0!==p?p:T.DefaultGateway)&&void 0!==g?g:"—",R=null!==(f=(0,h.SR)(M))&&void 0!==f?f:"—",U=null!==(j=null!==(v=E.X_CT_COM_IPv6IPAddress)&&void 0!==v?v:T.X_CT_COM_IPv6IPAddress)&&void 0!==j?j:"—",A=(T.DNSServers||"").split(/[ ,\n]+/).map(e=>e.trim()).filter(Boolean),P=A.length>0?A.join(", "):"Not provided",z=null!==(N=null==B?void 0:B.RootMacAddress)&&void 0!==N?N:"—",L=null!==(y=null==M?void 0:null===(c=M.device_cfg)||void 0===c?void 0:null===(o=c[0])||void 0===o?void 0:o.X_ALU_COM_LastActiveTime)&&void 0!==y?y:null,O=(0,h._o)(L),q="string"==typeof L&&""!==L.trim()&&"—"!==O&&O!==L?"".concat(O," • ").concat(L):O,F=[{label:"Connection",value:null!==(w=T.Name)&&void 0!==w?w:"—"},{label:"Status",value:null!==(S=null!==(_=E.ConnectionStatus)&&void 0!==_?_:T.ConnectionStatus)&&void 0!==S?S:"Unknown"},{label:"External IPv4",value:R},{label:"External IPv6",value:U},{label:"Gateway",value:null!=I?I:"—"},{label:"DNS Servers",value:P},{label:"MAC Address",value:z},{label:"Session Length",value:q}];return(0,l.jsx)(Q,{open:C,onOpenChange:e=>{e||k()},children:(0,l.jsxs)(K,{children:[(0,l.jsxs)(ee,{children:[(0,l.jsx)(ea,{children:"WAN Connection Details"}),(0,l.jsx)(et,{children:"Connection properties reported by the modem."})]}),(0,l.jsx)(es,{className:"max-h-[60vh] space-y-4 overflow-y-auto pr-1",children:(0,l.jsx)("div",{className:"grid gap-4 text-sm sm:grid-cols-2",children:F.map(e=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:e.label}),(0,l.jsx)("p",{className:"text-sm text-foreground",children:e.value})]},e.label))})}),(0,l.jsx)(el,{children:(0,l.jsx)(b.z,{variant:"outline",onClick:k,children:"Close"})})]})})}ed.displayName=en.gb.displayName;var eu=t(28004),em=t(68595);let ex=null!==(s=t(20357).env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==s?s:"";async function ep(e){let a=await fetch("".concat(ex).concat(e),{cache:"no-store"});if(!a.ok)throw Error("Request to ".concat(e," failed with ").concat(a.status));return await a.json()}function eg(){var e,a,t;let[s,u]=(0,o.useState)({}),[m,x]=(0,o.useState)(!0),[p,g]=(0,o.useState)(null),[v,j]=(0,o.useState)(1e3),[N,y]=(0,o.useState)(null),[w,_]=(0,o.useState)(!1),[S,C]=(0,o.useState)(0),[M,D]=(0,o.useState)(!1),[T,B]=(0,o.useState)(!1),[E,I]=(0,o.useState)(null),[R,U]=(0,o.useState)(!1),[A,P]=(0,o.useState)(null),[z,L]=(0,o.useState)(!1),[O,q]=(0,o.useState)(null),[F,V]=(0,o.useState)(!1),[W,Z]=(0,o.useState)(!1),[H,G]=(0,o.useState)(""),[Y,X]=(0,o.useState)(!1),[Q,J]=(0,o.useState)(!1),[$,K]=(0,o.useState)(!1),[ee,ea]=(0,o.useState)(!0),et=(0,o.useCallback)(e=>{var a;let t="success"===e.tone?c.Am.success:"error"===e.tone?c.Am.error:c.Am.info,s=null!==(a=e.title)&&void 0!==a?a:e.message,l=e.title?e.message:void 0;t(s,l?{description:l}:void 0)},[]);(0,o.useEffect)(()=>{let e=window.localStorage.getItem("pollingEnabled");null!==e&&ea("true"===e)},[]);let es=(0,o.useCallback)(async e=>{if(!z){L(!0);try{let a=await fetch("".concat(ex,"/api/led_state"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enable:e})});if(!a.ok)throw Error("LED update failed (".concat(a.status,")"));P(e),u(a=>({...a,ledState:e})),et({tone:"success",message:e?"Device LEDs enabled.":"Device LEDs disabled."})}catch(e){et({tone:"error",message:e.message||"Unable to change LED state."})}finally{L(!1)}}},[z,et]),el=(0,o.useCallback)(async()=>{if(!Y){X(!0),et({tone:"info",message:"Renewing WAN IP…"});try{let e=(0,h.SR)(s.preloginStatus);await eh("/api/set_apn?apn=internet"),await ef(1e3),await eh("/api/set_apn?apn=xlunlimited"),await ef(1e3);let a=null,t=s.preloginStatus;for(let s=0;s<30&&(t=await ep("/api/prelogin_status"),!(a=(0,h.SR)(t))||a===e);s+=1)await ef(1e3);a&&a!==e?(et({tone:"success",message:"New WAN IP acquired: ".concat(a)}),u(e=>({...e,preloginStatus:t}))):et({tone:"error",message:"Unable to obtain a new WAN IP. Please try again later."})}catch(e){et({tone:"error",message:e.message||"WAN IP renewal failed."})}finally{X(!1),C(Date.now())}}},[s.preloginStatus,Y,et]),en=(0,o.useCallback)(async()=>{if(!Q){J(!0),et({tone:"info",message:"Sending reboot command…"});try{await ep("/api/do_reboot"),et({tone:"success",message:"Reboot command sent. Modem is restarting."})}catch(e){et({tone:"error",message:e.message||"Unable to reboot the device."})}finally{J(!1)}}},[Q,et]),er=(0,o.useCallback)(async e=>{if(!$){K(!0);try{var a;let t=Math.max(Date.now(),(null!==(a=s.dataExpired)&&void 0!==a?a:0)*1e3),l=Math.floor((t+1e3*e)/1e3);await eh("/api/set_data_expired?data_expired=".concat(l)),u(e=>({...e,dataExpired:l})),et({tone:"success",message:"Data expiration updated."})}catch(e){et({tone:"error",message:e.message||"Failed to update data expiration."})}finally{K(!1)}}},[s.dataExpired,$,et]),ed=(0,o.useCallback)(async e=>{if(e.preventDefault(),$)return;if(!H){et({tone:"error",message:"Please pick a date first."});return}let a=new Date("".concat(H,"T00:00:00"));if(Number.isNaN(a.getTime())){et({tone:"error",message:"Invalid date format."});return}K(!0);try{let e=Math.floor(a.getTime()/1e3);await eh("/api/set_data_expired?data_expired=".concat(e)),u(a=>({...a,dataExpired:e})),G(""),et({tone:"success",message:"Expiration date saved."})}catch(e){et({tone:"error",message:e.message||"Failed to save expiration date."})}finally{K(!1)}},[H,$,et]),eg=(0,o.useCallback)(async()=>{if(!F){V(!0);try{let e=await ep("/api/sms");u(a=>({...a,sms:(0,h.EE)(e)}))}catch(e){et({tone:"error",message:e.message||"Unable to refresh SMS inbox."})}finally{V(!1)}}},[F,et]),eb=(0,o.useCallback)(async(e,a)=>{if(!F){V(!0);try{let t="/api/set_sms_state?smsid=".concat(encodeURIComponent(e.SMSID),"&smsunread=").concat(a?1:0);await ep(t),u(t=>{var s;return{...t,sms:null===(s=t.sms)||void 0===s?void 0:s.map(t=>t.SMSID===e.SMSID?{...t,SMSUnread:a}:t)}})}catch(e){et({tone:"error",message:e.message||"Unable to update SMS state."})}finally{V(!1)}}},[F,et]),ev=(0,o.useCallback)(async e=>{if(!F){V(!0);try{let a=await fetch("".concat(ex,"/api/delete_sms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sms_ids:[e]})});if(!a.ok)throw Error("Failed to delete SMS (".concat(a.status,")"));u(a=>{var t;return{...a,sms:null===(t=a.sms)||void 0===t?void 0:t.filter(a=>a.SMSID!==e)}}),q(a=>a===e?null:a),et({tone:"success",message:"SMS deleted."})}catch(e){et({tone:"error",message:e.message||"Unable to delete SMS."})}finally{V(!1)}}},[F,et]),ej=(0,o.useCallback)(()=>{s.config&&I((0,h.SD)(s.config,1e3)),D(!0)},[s.config]),eN=(0,o.useCallback)((e,a)=>{I(t=>t?{...t,[e]:a}:t)},[]),ey=(0,o.useCallback)(async e=>{if(e.preventDefault(),E&&!R){U(!0);try{await ep("/api/config/listener_available?host=".concat(encodeURIComponent(E.listen_host),"&port=").concat(encodeURIComponent(E.listen_port)));let e=(()=>{let e=Number(E.poll_interval_ms);return Number.isFinite(e)&&e>0?Math.max(500,e):1e3})(),a=(()=>{let e=Number(E.long_polling_interval_seconds);return Number.isFinite(e)&&e>0?Math.max(5,Math.floor(e)):10})(),t={router_host:E.router_host,router_user:E.router_user,router_password:E.router_password,listen_host:E.listen_host,listen_port:E.listen_port,poll_interval_ms:e,telegram:{enabled:"true"===E.telegram_enabled,api_base:E.telegram_api_base.trim(),bot_token:E.telegram_bot_token.trim(),chat_id:E.telegram_chat_id.trim(),parse_mode:E.telegram_parse_mode.trim()},long_polling:{enabled:"true"===E.long_polling_enabled,forward_sms_to_telegram:"true"===E.long_polling_forward_sms_to_telegram,interval_seconds:a},mqtt:{enabled:"true"===E.mqtt_enabled,broker:E.mqtt_broker.trim(),client_id:E.mqtt_client_id.trim(),username:E.mqtt_username.trim(),password:E.mqtt_password,topic_base:E.mqtt_topic_base.trim()||"modem/nokia"}},s=await fetch("".concat(ex,"/api/config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Config save failed (".concat(s.status,")"))}et({tone:"success",message:"Configuration saved."}),D(!1),C(Date.now())}catch(e){et({tone:"error",message:e.message||"Unable to save configuration."})}finally{U(!1)}}},[E,R,et]);(0,o.useEffect)(()=>{let e=!0,a=null,t=async()=>{try{_(!0);let[a,t,s,l,n,r,d,i,o,c,m,x,p]=await Promise.all([ep("/api/config"),ep("/api/prelogin_status"),ep("/api/status_web"),ep("/api/service_data"),ep("/api/cell_identification").catch(()=>null),ep("/api/device_status"),ep("/api/daily_usage"),ep("/api/get_data_expired").catch(()=>null),ep("/api/sms").catch(()=>null),ep("/api/wlan_configs_24g").catch(()=>null),ep("/api/wlan_configs_5g").catch(()=>null),ep("/api/wan_status").catch(()=>null),ep("/api/led_state").catch(()=>null)]);if(!e)return;let f=null!=a?a:{};u({config:f,preloginStatus:t,statusWeb:s,serviceData:l,cellIdentification:n,deviceStatus:r,dailyUsage:d,dataExpired:(0,h.GQ)(i),sms:(0,h.EE)(o),wlan24:c,wlan5:m,wanStatus:x,ledState:(0,h.Av)(p)}),P((0,h.Av)(p)),y(Date.now()),g(null);let b=Math.max(500,(0,h.Rg)(f,1e3));j(e=>e===b?e:b)}catch(a){var s;if(!e)return;g(null!==(s=a.message)&&void 0!==s?s:"Unable to load dashboard data.")}finally{if(!e)return;x(!1),_(!1),ee&&(a=setTimeout(t,v))}};return t(),()=>{e=!1,a&&clearTimeout(a)}},[v,S,ee]),(0,o.useEffect)(()=>{var e;if(!T)return;let a=null!==(e=s.sms)&&void 0!==e?e:[];if(0===a.length){q(null);return}q(e=>e&&a.some(a=>a.SMSID===e)?e:a[0].SMSID)},[s.sms,T]);let ew=(0,o.useMemo)(()=>Math.round(v/1e3),[v]),e_=null!==(a=null===(e=s.sms)||void 0===e?void 0:e.filter(e=>e.SMSUnread).length)&&void 0!==a?a:0,eS=(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(b.z,{type:"button",variant:ee?"secondary":"outline",size:"sm",onClick:()=>ea(e=>{let a=!e;return window.localStorage.setItem("pollingEnabled",String(a)),window.dispatchEvent(new CustomEvent("polling:change",{detail:{enabled:a}})),a}),className:"h-9 gap-2 px-3",children:[(0,l.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(ee?"bg-emerald-400 animate-pulse":"bg-muted-foreground")}),"Polling ",ee?"On":"Off"]}),(0,l.jsx)(b.z,{type:"button",variant:"outline",size:"icon",onClick:()=>{C(Date.now())},disabled:w,"aria-label":w?"Refreshing":"Refresh",children:w?(0,l.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(r.Z,{className:"h-4 w-4"})}),(0,l.jsxs)(b.z,{type:"button",variant:"outline",size:"icon",onClick:()=>B(!0),className:"relative","aria-label":"SMS Inbox",children:[(0,l.jsx)(d.Z,{className:"h-4 w-4"}),e_>0?(0,l.jsx)(f.C,{variant:"destructive",className:"absolute -right-1 -top-1 h-5 min-w-[1.25rem] rounded-full px-1 py-0 text-[10px]",children:e_}):null]}),(0,l.jsx)(b.z,{type:"button",variant:"outline",size:"icon",onClick:ej,"aria-label":"Configuration",children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eu.V,{toolbar:eS,children:[(0,l.jsx)("section",{className:"space-y-4",children:(0,l.jsx)(em.m,{eyebrow:"Nokia FastMile 5G Gateway 2",title:"Modem Dashboard",description:(0,l.jsxs)(l.Fragment,{children:["Live signal metrics, traffic usage, device health, and connected clients. Data refreshes automatically every ",ew," second",1===ew?"":"s","."]})})}),p&&(0,l.jsx)("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:p}),m?(0,l.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,a)=>(0,l.jsx)("div",{className:"h-48 animate-pulse rounded-xl border border-neutral-800 bg-neutral-900/60"},a))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{data:s,ledEnabled:A,ledBusy:z,onToggleLed:es,onRenewIp:el,renewing:Y,onReboot:en,rebooting:Q,onOpenWanDetails:()=>Z(!0),onExtendData:er,onCustomExpirySubmit:ed,onCustomExpiryChange:e=>G(e),customExpiry:H,expiryBusy:$}),(0,l.jsxs)("footer",{className:"flex flex-col gap-1 text-xs text-neutral-500 md:flex-row md:items-center md:justify-between",children:[(0,l.jsxs)("span",{children:["Last updated:"," ",N?new Date(N).toLocaleString():"—"]}),(0,l.jsxs)("span",{children:["Poll interval: ",ew," second",1===ew?"":"s"]})]})]})]}),(0,l.jsx)(ei,{open:T,onClose:()=>B(!1),messages:null!==(t=s.sms)&&void 0!==t?t:[],busy:F,onRefresh:eg,onMarkRead:eb,onDelete:ev,selectedSmsId:O,onSelect:q}),(0,l.jsx)(eo,{open:M,onClose:()=>D(!1),draft:E,onChange:eN,onSubmit:ey,saving:R}),(0,l.jsx)(ec,{open:W,onClose:()=>Z(!1),preloginStatus:s.preloginStatus,wanStatus:s.wanStatus})]})}async function eh(e){let a=await fetch("".concat(ex).concat(e));if(!a.ok)throw Error("Request to ".concat(e," failed with ").concat(a.status));await a.json().catch(()=>null)}async function ef(e){return new Promise(a=>setTimeout(a,e))}}},function(e){e.O(0,[182,776,152,897,971,23,744],function(){return e(e.s=93145)}),_N_E=e.O()}]);