(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{57162:function(e,t,a){Promise.resolve().then(a.bind(a,14582))},14582:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ei}});var s,l=a(57437),n=a(51817),r=a(82431),i=a(89345),d=a(98728),o=a(2265),c=a(14438),u=a(17580),m=a(69430),x=a(21047),p=a(27648),g=a(21555),h=a(35974),f=a(62869),b=a(66070),v=a(95186),j=a(32759),N=a(50721),y=a(94508);let w=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(N.fC,{className:(0,y.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:(0,l.jsx)(N.bU,{className:(0,y.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});w.displayName=N.fC.displayName;var _=a(20271);let S=_.fC,C=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(_.aV,{ref:t,className:(0,y.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...s})});C.displayName=_.aV.displayName;let k=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(_.xz,{ref:t,className:(0,y.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...s})});k.displayName=_.xz.displayName;let M=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(_.VY,{ref:t,className:(0,y.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});M.displayName=_.VY.displayName;var D=a(81103);function T(e){let{title:t,description:a,action:s,children:n}=e;return(0,l.jsxs)(b.Zb,{className:"border-border/70 bg-card/80 text-card-foreground",children:[(0,l.jsxs)(b.Ol,{className:"flex flex-row items-start justify-between gap-4 pb-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(b.ll,{className:"text-base font-semibold leading-none text-foreground",children:t}),a?(0,l.jsx)(b.SZ,{className:"text-xs text-muted-foreground",children:a}):null]}),s?(0,l.jsx)("div",{className:"flex items-center gap-2",children:s}):null]}),(0,l.jsx)(b.aY,{className:"space-y-4 text-sm text-muted-foreground",children:n})]})}function B(e){let{data:t,ledEnabled:a,ledBusy:s,onToggleLed:n,onRenewIp:r,renewing:i,onReboot:d,rebooting:o,onOpenWanDetails:c,onExtendData:u,onCustomExpirySubmit:m,onCustomExpiryChange:x,customExpiry:p,expiryBusy:g}=e;return(0,l.jsxs)("div",{className:"grid gap-6 xl:grid-cols-[1.2fr,1fr]",children:[(0,l.jsxs)("section",{className:"grid gap-6",children:[(0,l.jsx)(I,{statusWeb:t.statusWeb,serviceData:t.serviceData,cellIdentification:t.cellIdentification,wanStatus:t.wanStatus,preloginStatus:t.preloginStatus,onOpenWanDetails:c}),(0,l.jsx)(A,{dailyUsage:t.dailyUsage}),(0,l.jsx)(q,{dataExpired:t.dataExpired,onExtendThirtyDays:()=>u(2592e3),onSubmit:m,onDateChange:x,dateValue:p,busy:g})]}),(0,l.jsxs)("section",{className:"grid gap-6",children:[(0,l.jsx)(z,{ledEnabled:a,ledBusy:s,onToggleLed:n,onRenewIp:r,renewing:i,onReboot:d,rebooting:o,onOpenWanDetails:c}),(0,l.jsx)(E,{deviceStatus:t.deviceStatus}),(0,l.jsx)(L,{wlan24:t.wlan24,wlan5:t.wlan5}),(0,l.jsx)(F,{preloginStatus:t.preloginStatus})]})]})}function I(e){var t,a,s,n,r,i,d,c,u,m,x,p,h,b,v,N,y,w,_,D,B,I,E,R,U,A,z,L,F,q;let{statusWeb:V,serviceData:Z,cellIdentification:W,wanStatus:G,preloginStatus:H,onOpenWanDetails:Q}=e,X=null!==(h=null==V?void 0:null===(a=V.cell_LTE_stats_cfg)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.stat)&&void 0!==h?h:{},Y=[{label:"Band",value:X.Band},{label:"PCI",value:X.PhysicalCellID},{label:"EARFCN",value:X.DownlinkEarfcn},{label:"ECI",value:X.ECI}],$=[{label:"RSRP",value:(0,g.$2)(X.RSRPCurrent,"dBm"),percent:(0,g.gb)(X.RSRPCurrent,-140,-64)},{label:"RSRQ",value:(0,g.$2)(X.RSRQCurrent,"dB"),percent:(0,g.gb)(X.RSRQCurrent,-20,-3)},{label:"SNR",value:(0,g.$2)(X.SNRCurrent,"dB"),percent:(0,g.gb)(X.SNRCurrent,-10,30)},{label:"RSSI",value:(0,g.$2)(X.RSSICurrent,"dBm"),percent:(0,g.gb)(X.RSSICurrent,-120,-30)}],{downlink:J,uplink:K}=(0,o.useMemo)(()=>{var e;let t=e=>Array.isArray(e)?e:e&&"object"==typeof e?Object.values(e):[],a=null!==(e=null==Z?void 0:Z.FunctionResult)&&void 0!==e?e:{};return{downlink:t(null==a?void 0:a.LTEDLCA),uplink:t(null==a?void 0:a.LTEULCA)}},[Z]),ee=(null!==(b=null==J?void 0:J.length)&&void 0!==b?b:0)>0||(null!==(v=null==K?void 0:K.length)&&void 0!==v?v:0)>0,et=null!==(w=null!==(y=null!==(N=null==W?void 0:null===(s=W.FunctionResult)||void 0===s?void 0:s.Name)&&void 0!==N?N:null==W?void 0:W.Name)&&void 0!==y?y:null==W?void 0:null===(n=W.functionResult)||void 0===n?void 0:n.Name)&&void 0!==w?w:null,ea=null!==(_=null==H?void 0:null===(d=H.wan_conns)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:null===(r=i.ipConns)||void 0===r?void 0:r[0])&&void 0!==_?_:{},es=null!==(D=null==G?void 0:null===(m=G.wan_conns)||void 0===m?void 0:null===(u=m[0])||void 0===u?void 0:null===(c=u.ipConns)||void 0===c?void 0:c[0])&&void 0!==D?D:{},el=null!==(B=(0,g.SR)(H))&&void 0!==B?B:"—",en=null!==(E=null!==(I=es.X_CT_COM_IPv6IPAddress)&&void 0!==I?I:ea.X_CT_COM_IPv6IPAddress)&&void 0!==E?E:"—",er=null!==(R=null==ea?void 0:ea.DNSServers)&&void 0!==R?R:"—",ei=null!==(U=null==ea?void 0:ea.X_CT_COM_IPv6DNSServers)&&void 0!==U?U:"—",ed=null!==(z=null!==(A=es.DefaultGateway)&&void 0!==A?A:ea.DefaultGateway)&&void 0!==z?z:"—",eo=null!==(F=null!==(L=es.ConnectionStatus)&&void 0!==L?L:ea.ConnectionStatus)&&void 0!==F?F:"Unknown",ec=null!==(q=null==H?void 0:null===(p=H.device_cfg)||void 0===p?void 0:null===(x=p[0])||void 0===x?void 0:x.X_ALU_COM_LastActiveTime)&&void 0!==q?q:null,eu=(0,g._o)(ec),em="string"==typeof ec&&""!==ec.trim()&&"—"!==eu&&eu!==ec?"".concat(eu," • ").concat(ec):eu;return(0,l.jsxs)(T,{title:null!=et?et:"LTE Signal",description:"Signal quality, carrier aggregation, and WAN connection summary",action:(0,l.jsx)(f.z,{variant:"link",size:"sm",onClick:Q,className:"px-0",children:"View details"}),children:[(0,l.jsxs)(S,{defaultValue:"signal",className:"space-y-3",children:[(0,l.jsxs)(C,{className:"inline-flex w-full items-center gap-1 rounded-lg border border-neutral-800 bg-neutral-900/60 p-0.5 text-xs font-semibold uppercase tracking-wide",children:[(0,l.jsx)(k,{value:"signal",className:"flex-1 rounded-md px-3 py-1 text-neutral-400 transition hover:text-white data-[state=active]:bg-neutral-800 data-[state=active]:text-white",children:"Signal"}),(0,l.jsx)(k,{value:"ca",className:"flex-1 rounded-md px-3 py-1 text-neutral-400 transition hover:text-white data-[state=active]:bg-neutral-800 data-[state=active]:text-white",children:"Carrier Agg."})]}),(0,l.jsxs)(M,{value:"signal",className:"space-y-3",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 gap-2 text-sm text-neutral-400",children:(0,l.jsx)("span",{className:"font-semibold",children:"Main Signal"})}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-400",children:Y.map(e=>{let{label:t,value:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"font-semibold text-neutral-500",children:t}),(0,l.jsx)("span",{className:"text-sm text-neutral-200",children:null!=a?a:"—"})]},t)})}),(0,l.jsx)("hr",{className:"border-neutral-800"}),(0,l.jsx)("div",{className:"space-y-3 text-xs text-neutral-400",children:$.map(e=>{let{label:t,value:a,percent:s}=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-1.5 flex items-center justify-between",children:[(0,l.jsx)("span",{className:"font-semibold text-neutral-500",children:t}),(0,l.jsx)("span",{className:"text-sm text-neutral-200",children:a})]}),(0,l.jsx)(j.E,{value:s,className:"h-1.5 bg-neutral-800"})]},t)})})]}),(0,l.jsx)(M,{value:"ca",className:"space-y-3",children:ee?(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(P,{title:"Downlink",carriers:J}),(0,l.jsx)(P,{title:"Uplink",carriers:K})]}):(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:"Carrier aggregation data is not available."})})]}),(0,l.jsx)("div",{className:"space-y-3 text-xs text-muted-foreground",children:(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(O,{label:"External IPv4",value:el}),(0,l.jsx)(O,{label:"External IPv6",value:en}),(0,l.jsx)(O,{label:"Gateway",value:ed}),(0,l.jsx)(O,{label:"DNSv4",value:er}),(0,l.jsx)(O,{label:"DNSv6",value:ei}),(0,l.jsx)(O,{label:"Status",value:eo}),(0,l.jsx)(O,{label:"Session",value:em})]})})]})}function E(e){var t,a,s,n,r,i,d;let{deviceStatus:o}=e,c=null!==(n=null==o?void 0:o.UpTime)&&void 0!==n?n:0,u=null!==(r=null==o?void 0:null===(t=o.cpu_usageinfo)||void 0===t?void 0:t.CPUUsage)&&void 0!==r?r:null,m=null!==(i=null==o?void 0:null===(a=o.mem_info)||void 0===a?void 0:a.Total)&&void 0!==i?i:0,x=null!==(d=null==o?void 0:null===(s=o.mem_info)||void 0===s?void 0:s.Free)&&void 0!==d?d:0,p=m>0?Math.round((m-x)/m*100):0;return(0,l.jsx)(T,{title:"Device Health",description:"Runtime statistics reported by the modem",children:(0,l.jsxs)("div",{className:"grid gap-3",children:[(0,l.jsx)(O,{label:"Uptime",value:(0,g.d5)(c)}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"CPU Usage"}),(0,l.jsxs)(h.C,{variant:"outline",className:"font-semibold",children:[u,"%"]})]}),(0,l.jsx)(j.E,{value:u,className:"h-2"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Memory Usage"}),(0,l.jsxs)(h.C,{variant:"outline",className:"font-semibold",children:[p,"%"]})]}),(0,l.jsx)(j.E,{value:p,className:"h-2"})]})]})})}function R(e){if(0===e.length)return{rows:[],totals:{download:"0 B",upload:"0 B",combined:"0 B"}};let t=e.reduce((e,t)=>e+t.downloadBytes,0),a=e.reduce((e,t)=>e+t.uploadBytes,0),s=e.reduce((e,t)=>e+t.combinedBytes,0);return{rows:e.map((t,a)=>{let l=e[a+1],n=U(t.combinedBytes,null==l?void 0:l.combinedBytes,null==l?void 0:l.label),r=U(t.downloadBytes,null==l?void 0:l.downloadBytes,null==l?void 0:l.label),i=U(t.uploadBytes,null==l?void 0:l.uploadBytes,null==l?void 0:l.label);return{key:t.key,label:t.label,download:(0,g.td)(t.downloadBytes),upload:(0,g.td)(t.uploadBytes),combined:(0,g.td)(t.combinedBytes),share:(0,g.rl)(s>0?t.combinedBytes/s*100:0),downloadBytes:t.downloadBytes,uploadBytes:t.uploadBytes,combinedBytes:t.combinedBytes,previousCombinedBytes:null==l?void 0:l.combinedBytes,downloadTrend:r,uploadTrend:i,trend:n}}),totals:{download:(0,g.td)(t),upload:(0,g.td)(a),combined:(0,g.td)(s)}}}function U(e,t,a){let s,n,r;if(null==t)return null;let i=e-t,d=0===i?"flat":i>0?"up":"down",o=Math.abs(i),c=t>0?o/t*100:null,p="down"===d?"-":"up"===d?"+":"",h="flat"===d?"0":"".concat(p).concat((0,g.td)(o)),f=null===c||"flat"===d?void 0:"".concat(p).concat(c.toFixed(1),"%");"up"===d?(s=(0,l.jsx)(u.Z,{className:"h-3.5 w-3.5 text-emerald-400"}),n="text-emerald-400",r="Naik"):"down"===d?(s=(0,l.jsx)(m.Z,{className:"h-3.5 w-3.5 text-rose-400"}),n="text-rose-400",r="Turun"):(s=(0,l.jsx)(x.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),n="text-muted-foreground",r="Tidak berubah");let b=null!=a?a:"periode sebelumnya",v="flat"===d?"".concat(r," dibanding ").concat(b):"".concat(r," ").concat((0,g.td)(o)).concat(f?" (".concat(f,")"):""," dibanding ").concat(b);return{icon:s,deltaLabel:h,percentLabel:f,className:n,tooltip:v,previousLabel:b}}function A(e){let{dailyUsage:t}=e,a=(0,o.useMemo)(()=>Array.isArray(null==t?void 0:t.daily_data)?t.daily_data:Array.isArray(null==t?void 0:t.last_7_days)?t.last_7_days:[],[t]),s=(0,o.useMemo)(()=>a.map(e=>{var t,a,s,l,n,r;let i=null==e?void 0:e.date;if(!i)return null;let d=new Date("".concat(i,"T00:00:00Z"));return Number.isNaN(d.getTime())?null:{key:i,date:d,downloadBytes:null!==(l=null==e?void 0:null===(t=e.download)||void 0===t?void 0:t.raw_bytes)&&void 0!==l?l:0,uploadBytes:null!==(n=null==e?void 0:null===(a=e.upload)||void 0===a?void 0:a.raw_bytes)&&void 0!==n?n:0,combinedBytes:null!==(r=null==e?void 0:null===(s=e.combined)||void 0===s?void 0:s.raw_bytes)&&void 0!==r?r:0}}).filter(e=>null!==e).sort((e,t)=>t.date.getTime()-e.date.getTime()),[a]),n=(0,o.useMemo)(()=>s.slice(0,7).map(e=>({key:e.key,label:(0,g.p6)(e.key),sortValue:e.date.getTime(),downloadBytes:e.downloadBytes,uploadBytes:e.uploadBytes,combinedBytes:e.combinedBytes})),[s]),r=(0,o.useMemo)(()=>{let e=new Map;return s.forEach(t=>{let a=function(e){let t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),a=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(a+6)%7),t}(t.date),s=new Date(a);s.setUTCDate(s.getUTCDate()+6);let l=a.toISOString().slice(0,10);e.has(l)||e.set(l,{key:l,label:"".concat((0,g.p6)(l)," – ").concat((0,g.p6)(s.toISOString().slice(0,10))),sortValue:a.getTime(),downloadBytes:0,uploadBytes:0,combinedBytes:0});let n=e.get(l);n.downloadBytes+=t.downloadBytes,n.uploadBytes+=t.uploadBytes,n.combinedBytes+=t.combinedBytes}),Array.from(e.values()).sort((e,t)=>t.sortValue-e.sortValue).slice(0,8)},[s]),i=(0,o.useMemo)(()=>{let e=new Map;return s.forEach(t=>{var a;let s=new Date(Date.UTC((a=t.date).getUTCFullYear(),a.getUTCMonth(),1)),l="".concat(s.getUTCFullYear(),"-").concat(String(s.getUTCMonth()+1).padStart(2,"0"));e.has(l)||e.set(l,{key:l,label:s.toLocaleDateString("id-ID",{month:"long",year:"numeric"}),sortValue:s.getTime(),downloadBytes:0,uploadBytes:0,combinedBytes:0});let n=e.get(l);n.downloadBytes+=t.downloadBytes,n.uploadBytes+=t.uploadBytes,n.combinedBytes+=t.combinedBytes}),Array.from(e.values()).sort((e,t)=>t.sortValue-e.sortValue).slice(0,12)},[s]),d=(0,o.useMemo)(()=>R(n),[n]),c=(0,o.useMemo)(()=>R(r),[r]),u=(0,o.useMemo)(()=>R(i),[i]),m=(0,o.useMemo)(()=>{if(s.length<2)return null;let[e,t]=s;return U(e.combinedBytes,t.combinedBytes,(0,g.p6)(t.key))},[s]),x=(0,o.useMemo)(()=>{if(r.length<2)return null;let[e,t]=r;return U(e.combinedBytes,t.combinedBytes,t.label)},[r]),p=(0,o.useMemo)(()=>{if(i.length<2)return null;let[e,t]=i;return U(e.combinedBytes,t.combinedBytes,t.label)},[i]),h=(0,o.useMemo)(()=>[{key:"daily",label:"Harian",dataset:d,emptyMessage:"Belum ada data harian yang terekam."},{key:"weekly",label:"Mingguan",dataset:c,emptyMessage:"Belum ada agregasi mingguan yang tersedia."},{key:"monthly",label:"Bulanan",dataset:u,emptyMessage:"Belum ada agregasi bulanan yang tersedia."}],[d,c,u]);return(0,l.jsx)(T,{title:"Data Usage",description:"Breakdown of modem traffic across daily, weekly, and monthly windows",action:(0,l.jsx)(Z,{href:"/report",children:"Full report"}),children:(0,l.jsxs)(S,{defaultValue:"daily",className:"space-y-4",children:[(0,l.jsx)(C,{className:"inline-flex w-full items-center gap-1 rounded-lg border border-border/70 bg-muted/20 p-0.5 text-xs font-semibold uppercase tracking-wide",children:h.map(e=>(0,l.jsx)(k,{value:e.key,className:"flex-1 rounded-md px-3 py-1 text-muted-foreground transition hover:text-foreground data-[state=active]:bg-muted data-[state=active]:text-foreground",children:e.label},e.key))}),h.map(e=>{let t="daily"===e.key?m:"weekly"===e.key?x:p;return(0,l.jsxs)(M,{value:e.key,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs text-muted-foreground",children:[(0,l.jsx)(V,{label:"Download",value:e.dataset.totals.download,tone:"blue",customClass:"text-center"}),(0,l.jsx)(V,{label:"Upload",value:e.dataset.totals.upload,tone:"green",customClass:"text-center"}),(0,l.jsx)(V,{label:"Total",value:e.dataset.totals.combined,tone:"neutral",customClass:"text-center"})]}),t?(0,l.jsxs)("div",{className:"flex gap-1 rounded-lg border border-border/60 bg-muted/30 px-3 py-2 text-xs flex-row items-center justify-between",children:[(0,l.jsxs)(D.u,{children:[(0,l.jsx)(D.aJ,{asChild:!0,children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[t.icon,(0,l.jsxs)("span",{className:"font-semibold ".concat(t.className),children:[t.deltaLabel,t.percentLabel?" (".concat(t.percentLabel,")"):""]})]})}),(0,l.jsx)(D._v,{children:t.tooltip})]}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:["Dibanding ",t.previousLabel]})]}):null,(0,l.jsx)("div",{className:"overflow-hidden rounded-lg border border-border/50",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-border/60 text-xs sm:text-sm",children:[(0,l.jsx)("thead",{className:"bg-muted/50 text-muted-foreground",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Periode"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Download"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Upload"}),(0,l.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"Total"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-border/60 text-foreground",children:0===e.dataset.rows.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-xs text-muted-foreground",children:e.emptyMessage})}):e.dataset.rows.map(t=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-4 py-2",children:t.label}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:t.downloadTrend?(0,l.jsxs)(D.u,{children:[(0,l.jsx)(D.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:t.downloadTrend.className,children:t.downloadTrend.icon}),(0,l.jsx)("span",{className:"text-blue-400",children:t.download})]})}),(0,l.jsx)(D._v,{children:t.downloadTrend.tooltip})]}):(0,l.jsx)("span",{className:"text-blue-400",children:t.download})}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:t.uploadTrend?(0,l.jsxs)(D.u,{children:[(0,l.jsx)(D.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:t.uploadTrend.className,children:t.uploadTrend.icon}),(0,l.jsx)("span",{className:"text-emerald-400",children:t.upload})]})}),(0,l.jsx)(D._v,{children:t.uploadTrend.tooltip})]}):(0,l.jsx)("span",{className:"text-emerald-400",children:t.upload})}),(0,l.jsx)("td",{className:"px-4 py-2 text-right",children:t.trend?(0,l.jsxs)(D.u,{children:[(0,l.jsx)(D.aJ,{asChild:!0,children:(0,l.jsxs)("span",{className:"inline-flex items-center justify-end gap-1",children:[(0,l.jsx)("span",{className:t.trend.className,children:t.trend.icon}),t.combined]})}),(0,l.jsx)(D._v,{children:t.trend.tooltip})]}):(0,l.jsx)("span",{className:"inline-flex justify-end",children:t.combined})})]},"".concat(e.key,"-").concat(t.key)))})]})})]},e.key)})]})})}function P(e){let{title:t,carriers:a}=e;return a&&0!==a.length?(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:t}),(0,l.jsx)("ul",{className:"mt-3 space-y-3 text-xs text-muted-foreground",children:a.map((e,a)=>{var s,n,r,i;return(0,l.jsx)("li",{className:"rounded-lg border border-border/60 bg-muted/40 p-3",children:(0,l.jsxs)("div",{className:"grid grid-cols-[1fr,auto] gap-2",children:[(0,l.jsx)("span",{children:"Band"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(s=e.ScellBand)&&void 0!==s?s:"—"}),(0,l.jsx)("span",{children:"Bandwidth"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(n=e.ScellBandwidth)&&void 0!==n?n:"—"}),(0,l.jsx)("span",{children:"PCI"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(r=e.PhysicalCellID)&&void 0!==r?r:"—"}),(0,l.jsx)("span",{children:"EARFCN"}),(0,l.jsx)("span",{className:"text-foreground",children:null!==(i=e.ScellChannel)&&void 0!==i?i:"—"})]})},"".concat(t,"-").concat(a))})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:t}),(0,l.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"No carriers detected."})]})}function z(e){let{ledEnabled:t,ledBusy:a,onToggleLed:s,onRenewIp:n,renewing:r,onReboot:i,rebooting:d,onOpenWanDetails:o}=e;return(0,l.jsx)(T,{title:"Controls & Actions",description:"Operate modem features and shortcuts",children:(0,l.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"Device LEDs"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Toggle the enclosure indicators for a quieter environment."})]}),(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)(w,{checked:!!t,onCheckedChange:e=>s(e),disabled:a,"aria-label":"Toggle device LEDs"})})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f.z,{onClick:n,disabled:r,className:"w-full justify-start",children:r?"Renewing…":"Renew WAN IP"}),(0,l.jsx)(f.z,{onClick:i,disabled:d,variant:"destructive",className:"w-full justify-start",children:d?"Rebooting…":"Reboot modem"}),(0,l.jsx)(f.z,{variant:"outline",onClick:o,className:"w-full justify-start",children:"WAN details"})]})]})})}function L(e){var t,a,s,n,r,i;let{wlan24:d,wlan5:o}=e,c=[{label:"2.4 GHz",config:null!==(n=null==d?void 0:null===(t=d.wlan_config_glb)||void 0===t?void 0:t[0])&&void 0!==n?n:null},{label:"5 GHz",config:null!==(i=null!==(r=null==o?void 0:null===(a=o.wlan_config_glb11ac)||void 0===a?void 0:a[0])&&void 0!==r?r:null==o?void 0:null===(s=o.wlan_config_glb)||void 0===s?void 0:s[0])&&void 0!==i?i:null}];return(0,l.jsx)(T,{title:"Wi-Fi Radios",description:"SSID, channel, and security overview",children:(0,l.jsx)("div",{className:"space-y-3 text-sm text-muted-foreground",children:c.map(e=>{var t,a,s,n;let{label:r,config:i}=e,d=(0,g.sw)(null==i?void 0:i.Enable);return(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-foreground",children:null!==(t=null==i?void 0:i.SSID)&&void 0!==t?t:"—"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:r})]}),(0,l.jsx)(h.C,{variant:d?"secondary":"outline",className:d?"bg-emerald-500/15 text-emerald-400":"text-muted-foreground",children:d?"Enabled":"Disabled"})]}),(0,l.jsxs)("dl",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{children:"Mode"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(a=null==i?void 0:i.X_ALU_COM_Mode)&&void 0!==a?a:"—"})]}),(0,l.jsxs)("div",{className:"ml-auto text-right",children:[(0,l.jsx)("dt",{children:"Channel"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(s=null==i?void 0:i.Channel)&&void 0!==s?s:"Auto"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{children:"Bandwidth"}),(0,l.jsx)("dd",{className:"text-foreground",children:null!==(n=null==i?void 0:i.X_ALU_COM_Bandwidth)&&void 0!==n?n:"—"})]}),(0,l.jsxs)("div",{className:"ml-auto text-right",children:[(0,l.jsx)("dt",{children:"Security"}),(0,l.jsx)("dd",{className:"text-foreground",children:(0,g.FM)(i)})]})]})]},r)})})})}function F(e){let{preloginStatus:t}=e,a=(Array.isArray(null==t?void 0:t.device_cfg)?t.device_cfg:[]).filter(e=>1===e.Active),s=a.filter(e=>"Ethernet"===e.InterfaceType).length,n=a.filter(e=>"Ethernet"!==e.InterfaceType).length,r=a.slice(0,6).map(e=>{var t,a,s;return{id:null!==(s=null!==(a=null!==(t=e.MACAddress)&&void 0!==t?t:e.ID)&&void 0!==a?a:e.HostName)&&void 0!==s?s:Math.random().toString(36),name:e.HostName||e.Alias||"Unknown device",ip:e.IPAddress||"—",iface:e.InterfaceType||"Unknown"}});return(0,l.jsxs)(T,{title:"Connected Devices",description:"Active clients reported by the modem",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center text-sm text-muted-foreground",children:[(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Ethernet"}),(0,l.jsx)("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:s})]}),(0,l.jsxs)("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide",children:"Wi-Fi"}),(0,l.jsx)("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:n})]})]}),(0,l.jsx)("div",{className:"mt-4 space-y-2 text-xs",children:0===r.length?(0,l.jsx)("p",{className:"text-muted-foreground",children:"No active clients detected."}):r.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 px-3 py-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-foreground",children:e.name}),(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:e.ip})]}),(0,l.jsx)(h.C,{variant:"outline",className:"text-[11px] uppercase",children:e.iface})]},e.id))})]})}function q(e){let{dataExpired:t,onExtendThirtyDays:a,onSubmit:s,onDateChange:n,dateValue:r,busy:i}=e,d=(0,o.useMemo)(()=>{if(!t)return{label:"Not configured",tone:"neutral"};let e=new Date(1e3*t),a=new Date,s=Math.floor((e.getTime()-a.getTime())/864e5);return s<0?{label:"".concat((0,g.p6)(e.toISOString().slice(0,10))," (expired ").concat(Math.abs(s)," day").concat(-1===s?"":"s"," ago)"),tone:"danger"}:s<=3?{label:"".concat((0,g.p6)(e.toISOString().slice(0,10))," (").concat(s," day").concat(1===s?"":"s"," remaining)"),tone:"warning"}:{label:"".concat((0,g.p6)(e.toISOString().slice(0,10))," (").concat(s," day").concat(1===s?"":"s"," remaining)"),tone:"success"}},[t]),c="danger"===d.tone?"text-red-400":"warning"===d.tone?"text-yellow-400":"success"===d.tone?"text-green-400":"text-neutral-300";return(0,l.jsxs)(T,{title:"Data Expiration",description:"Manage how long modem traffic counters remain valid",children:[(0,l.jsx)("p",{className:"text-sm font-semibold ".concat(c),children:d.label}),(0,l.jsxs)("form",{className:"mt-4 space-y-4",onSubmit:s,children:[(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("span",{className:"font-semibold text-muted-foreground",children:"Expiration date"}),(0,l.jsx)(v.I,{type:"date",value:r,onChange:e=>n(e.target.value),disabled:i})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(f.z,{type:"button",onClick:a,disabled:i,variant:"secondary",className:"w-full",children:"Extend 30 Days"}),(0,l.jsx)(f.z,{type:"submit",disabled:i||!r,className:"w-full",children:"Save Date"})]})]})]})}function O(e){let{label:t,value:a,highlight:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,l.jsx)("span",{className:"font-semibold",children:t}),(0,l.jsx)("span",{className:s?"text-foreground":"text-muted-foreground",children:a})]})}function V(e){let{label:t,value:a,tone:s,customClass:n}=e;return(0,l.jsxs)("div",{className:"flex h-full flex-col justify-center ".concat(n),children:[(0,l.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:t}),(0,l.jsx)("p",{className:"mt-1 text-base font-semibold ".concat("blue"===s?"text-blue-400":"green"===s?"text-emerald-400":"text-foreground"),children:a})]})}function Z(e){let{href:t,children:a}=e;return(0,l.jsx)(f.z,{asChild:!0,variant:"outline",size:"sm",className:"gap-2",children:(0,l.jsx)(p.default,{href:t,children:a})})}var W=a(87769),G=a(42208),H=a(6596),Q=a(26110),X=a(43643);let Y=o.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,l.jsxs)(X.fC,{ref:t,className:(0,y.cn)("relative overflow-hidden",a),...n,children:[(0,l.jsx)(X.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,l.jsx)($,{}),(0,l.jsx)(X.Ns,{})]})});Y.displayName=X.fC.displayName;let $=o.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,l.jsx)(X.gb,{ref:t,orientation:s,className:(0,y.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,l.jsx)(X.q4,{className:"relative flex-1 rounded-full bg-border"})})});$.displayName=X.gb.displayName;var J=a(38846);function K(e){let{className:t,defaultValue:a,value:s,min:n=0,max:r=100,...i}=e,d=o.useMemo(()=>Array.isArray(s)?s:Array.isArray(a)?a:[n,r],[s,a,n,r]);return(0,l.jsxs)(J.fC,{"data-slot":"slider",defaultValue:a,value:s,min:n,max:r,className:(0,y.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[(0,l.jsx)(J.fQ,{"data-slot":"slider-track",className:(0,y.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,l.jsx)(J.e6,{"data-slot":"slider-range",className:(0,y.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,l.jsx)(J.bU,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}function ee(e){var t,a;let{open:s,onClose:n,messages:r,busy:i,onRefresh:d,onMarkRead:o,onDelete:c,selectedSmsId:u,onSelect:m}=e,x=null!==(a=null!==(t=r.find(e=>e.SMSID===u))&&void 0!==t?t:r[0])&&void 0!==a?a:null;return(0,l.jsx)(Q.Vq,{open:s,onOpenChange:e=>{e||n()},children:(0,l.jsxs)(Q.cZ,{children:[(0,l.jsxs)(Q.fK,{children:[(0,l.jsx)(Q.$N,{children:"SMS Inbox"}),(0,l.jsxs)(Q.Be,{children:[r.length," message",1===r.length?"":"s"," stored on the modem."]})]}),(0,l.jsx)(Q.a7,{children:(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,260px),minmax(0,1fr)] lg:max-h-[70vh]",children:[(0,l.jsx)(Y,{className:"min-h-[220px] max-h-[50vh] rounded-md border border-border bg-muted/20 lg:h-[60vh] lg:max-h-none",children:0===r.length?(0,l.jsx)("p",{className:"px-4 py-6 text-sm text-muted-foreground",children:"Inbox is empty."}):(0,l.jsx)("ul",{className:"text-sm",children:r.map(e=>(0,l.jsxs)("li",{onClick:()=>m(e.SMSID),className:"cursor-pointer border-b border-border/60 px-4 py-3 transition hover:bg-muted ".concat(e.SMSID===(null==x?void 0:x.SMSID)?"bg-muted/60":""),children:[(0,l.jsx)("p",{className:"font-semibold ".concat(e.SMSUnread?"text-foreground":"text-muted-foreground"),children:e.SMSSender||"Unknown sender"}),(0,l.jsx)("p",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:e.SMSContent||"(empty message)"}),(0,l.jsx)("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-muted-foreground/80",children:(0,g.F1)(e.SMSDateTime)})]},e.SMSID))})}),(0,l.jsx)("section",{className:"flex min-h-[220px] max-h-[50vh] flex-col gap-4 rounded-md border border-border bg-muted/10 p-4 lg:h-[60vh] lg:max-h-none",children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:x.SMSSender||"Unknown sender"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,g.F1)(x.SMSDateTime)})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(f.z,{variant:"outline",size:"sm",onClick:()=>o(x,!x.SMSUnread),disabled:i,children:x.SMSUnread?"Mark as read":"Mark as unread"}),(0,l.jsx)(f.z,{variant:"destructive",size:"sm",onClick:()=>c(x.SMSID),disabled:i,children:"Delete"})]})]}),(0,l.jsx)(Y,{className:"flex-1 rounded-md border border-border bg-background p-4",children:(0,l.jsx)("p",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:x.SMSContent||"(empty message)"})})]}):(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a message on the left to read its contents."})})]})}),(0,l.jsxs)(Q.cN,{className:"gap-2",children:[(0,l.jsx)(f.z,{variant:"outline",onClick:d,disabled:i,children:"Refresh"}),(0,l.jsx)(f.z,{variant:"ghost",onClick:n,children:"Close"})]})]})})}function et(e){var t,a;let{open:s,onClose:n,draft:r,onChange:i,onSubmit:d,saving:c}=e,[u,m]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1);if(!s||!r)return null;let h="true"===r.telegram_enabled,b="true"===r.long_polling_enabled,j="true"===r.long_polling_forward_sms_to_telegram,N="true"===r.mqtt_enabled,y=Number.parseFloat(null!==(t=r.poll_interval_ms)&&void 0!==t?t:""),_=Number.isFinite(y)?Math.min(Math.max(y,1e3),6e4):1e3,S=Number((0,g.tu)(_).toFixed(2)),C=Number.parseFloat(null!==(a=r.long_polling_interval_seconds)&&void 0!==a?a:""),k=Number.isFinite(C)?Math.min(Math.max(Math.floor(C),5),600):10,M=k>=60?"".concat((k/60).toFixed(1)," min"):"Less than 1 min";return(0,l.jsx)(Q.Vq,{open:s,onOpenChange:e=>{e||n()},children:(0,l.jsxs)(Q.cZ,{children:[(0,l.jsxs)(Q.fK,{children:[(0,l.jsx)(Q.$N,{children:"Edit Configuration"}),(0,l.jsx)(Q.Be,{children:"Update modem credentials, listener address, and optional Telegram bridge."})]}),(0,l.jsxs)("form",{className:"space-y-6",onSubmit:d,children:[(0,l.jsxs)(Q.a7,{className:"max-h-[65vh] space-y-6 overflow-y-auto text-sm",children:[(0,l.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,l.jsxs)("header",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Modem Connection"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure modem credentials and the local listener endpoint."})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Host"}),(0,l.jsx)(v.I,{value:r.router_host,onChange:e=>i("router_host",e.target.value),required:!0})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem User"}),(0,l.jsx)(v.I,{value:r.router_user,onChange:e=>i("router_user",e.target.value)})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Modem Password"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(v.I,{type:u?"text":"password",value:r.router_password,onChange:e=>i("router_password",e.target.value),className:"pr-10"}),(0,l.jsx)(f.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>m(e=>!e),className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":u?"Hide password":"Show password",children:u?(0,l.jsx)(W.Z,{className:"h-4 w-4"}):(0,l.jsx)(G.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Host"}),(0,l.jsx)(v.I,{value:r.listen_host,onChange:e=>i("listen_host",e.target.value),required:!0})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Listen Port"}),(0,l.jsx)(v.I,{value:r.listen_port,onChange:e=>i("listen_port",e.target.value),required:!0})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-md",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-foreground",children:[(0,l.jsxs)("span",{children:[S," s"]}),(0,l.jsxs)("span",{children:[_," ms"]})]}),(0,l.jsx)(K,{value:[_],min:1e3,max:6e4,step:1e3,onValueChange:e=>{var t;return i("poll_interval_ms",String(null!==(t=e[0])&&void 0!==t?t:1e3))},className:"w-full","aria-label":"Poll interval in milliseconds"})]})]})]})]}),(0,l.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Server Polling"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable backend polling of the modem for SMS forwarding and similar tasks."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:b?"Enabled":"Disabled"}),(0,l.jsx)(w,{checked:b,onCheckedChange:e=>i("long_polling_enabled",e?"true":"false"),"aria-label":"Toggle server polling"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Poll interval"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-foreground",children:[(0,l.jsxs)("span",{children:[k," s"]}),(0,l.jsx)("span",{children:M})]}),(0,l.jsx)(K,{value:[k],min:5,max:600,step:1,onValueChange:e=>{var t;return i("long_polling_interval_seconds",String(null!==(t=e[0])&&void 0!==t?t:5))},disabled:!b,className:"w-full","aria-label":"Poll interval in seconds"})]}),(0,l.jsx)("span",{className:"text-[11px] text-muted-foreground",children:"Must be at least 5 seconds. Defaults to 10 seconds."})]}),(0,l.jsx)(H.UQ,{type:"single",collapsible:!0,className:"rounded-md border border-input bg-background text-muted-foreground md:col-span-2",children:(0,l.jsxs)(H.Qd,{value:"mqtt",children:[(0,l.jsx)(H.o4,{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"MQTT Publishing"}),(0,l.jsxs)(H.vF,{className:"space-y-3 border-t border-border px-3 pb-3 pt-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Push polling updates to MQTT topics. Expand to configure broker credentials."}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:N?"Enabled":"Disabled"}),(0,l.jsx)(w,{checked:N,onCheckedChange:e=>i("mqtt_enabled",e?"true":"false"),disabled:!b,"aria-label":"Toggle MQTT publishing"})]}),!b&&(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to configure MQTT publishing."}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Broker URL"}),(0,l.jsx)(v.I,{value:r.mqtt_broker,onChange:e=>i("mqtt_broker",e.target.value),disabled:!N||!b,placeholder:"mqtt://localhost:1883"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Client ID"}),(0,l.jsx)(v.I,{value:r.mqtt_client_id,onChange:e=>i("mqtt_client_id",e.target.value),disabled:!N||!b,placeholder:"nokia-modem-client"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Username"}),(0,l.jsx)(v.I,{value:r.mqtt_username,onChange:e=>i("mqtt_username",e.target.value),disabled:!N||!b,placeholder:"mqtt-user"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Password"}),(0,l.jsx)(v.I,{type:"password",value:r.mqtt_password,onChange:e=>i("mqtt_password",e.target.value),disabled:!N||!b,placeholder:"••••••••"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Topic base"}),(0,l.jsx)(v.I,{value:r.mqtt_topic_base,onChange:e=>i("mqtt_topic_base",e.target.value),disabled:!N||!b,placeholder:"modem/nokia"})]})]})]})]})})]})]}),(0,l.jsxs)("section",{className:"space-y-4 rounded-lg border border-border bg-muted/10 p-4",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Telegram Bridge"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure optional Telegram notifications via bot API."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:h?"Enabled":"Disabled"}),(0,l.jsx)(w,{checked:h,onCheckedChange:e=>i("telegram_enabled",e?"true":"false"),"aria-label":"Toggle Telegram notifications"})]})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"API Base"}),(0,l.jsx)(v.I,{value:r.telegram_api_base,onChange:e=>i("telegram_api_base",e.target.value),disabled:!h,placeholder:"https://api.telegram.org"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Bot Token"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(v.I,{type:x?"text":"password",value:r.telegram_bot_token,onChange:e=>i("telegram_bot_token",e.target.value),disabled:!h,placeholder:"123456:ABC-DEF...",className:"pr-10"}),(0,l.jsx)(f.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(e=>!e),disabled:!h,className:"absolute right-1.5 top-1/2 -translate-y-1/2","aria-label":x?"Hide bot token":"Show bot token",children:x?(0,l.jsx)(W.Z,{className:"h-4 w-4"}):(0,l.jsx)(G.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Default Chat ID"}),(0,l.jsx)(v.I,{value:r.telegram_chat_id,onChange:e=>i("telegram_chat_id",e.target.value),disabled:!h,placeholder:"123456789"})]}),(0,l.jsxs)("label",{className:"flex flex-col gap-2 text-muted-foreground",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Parse Mode"}),(0,l.jsxs)("select",{value:r.telegram_parse_mode,onChange:e=>i("telegram_parse_mode",e.target.value),disabled:!h,className:"h-10 w-full rounded-md border border-input bg-background px-3 text-sm text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[(0,l.jsx)("option",{value:"",children:"None"}),(0,l.jsx)("option",{value:"Markdown",children:"Markdown"}),(0,l.jsx)("option",{value:"MarkdownV2",children:"MarkdownV2"}),(0,l.jsx)("option",{value:"HTML",children:"HTML"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 text-muted-foreground md:col-span-2",children:[(0,l.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"Forward SMS to Telegram"}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-md border border-input bg-background px-3 py-2 text-xs shadow-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Use server polling to push unread SMS messages to Telegram."}),(0,l.jsx)(w,{checked:j,onCheckedChange:e=>i("long_polling_forward_sms_to_telegram",e?"true":"false"),disabled:!h||!b,"aria-label":"Toggle forwarding SMS to Telegram",title:b?void 0:"Enable server polling to forward SMS to Telegram."})]}),!b&&(0,l.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Enable server polling to forward SMS messages to Telegram."})]})]})]})]}),(0,l.jsxs)(Q.cN,{className:"gap-2",children:[(0,l.jsx)(f.z,{type:"button",variant:"outline",disabled:c,onClick:n,children:"Cancel"}),(0,l.jsx)(f.z,{type:"submit",disabled:c,children:c?"Saving…":"Save changes"})]})]})]})})}function ea(e){var t,a,s,n,r,i,d,o,c,u,m,x,p,h,b,v,j,N,y,w,_,S;let{open:C,onClose:k,preloginStatus:M,wanStatus:D}=e;if(!C)return null;let T=null!==(u=null==M?void 0:null===(s=M.wan_conns)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:null===(t=a.ipConns)||void 0===t?void 0:t[0])&&void 0!==u?u:{},B=null!==(m=null==M?void 0:null===(n=M.root_info)||void 0===n?void 0:n[0])&&void 0!==m?m:{},I=null!==(x=null==D?void 0:null===(d=D.wan_conns)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:null===(r=i.ipConns)||void 0===r?void 0:r[0])&&void 0!==x?x:{},E=null!==(h=null!==(p=I.DefaultGateway)&&void 0!==p?p:T.DefaultGateway)&&void 0!==h?h:"—",R=null!==(b=(0,g.SR)(M))&&void 0!==b?b:"—",U=null!==(j=null!==(v=I.X_CT_COM_IPv6IPAddress)&&void 0!==v?v:T.X_CT_COM_IPv6IPAddress)&&void 0!==j?j:"—",A=(T.DNSServers||"").split(/[ ,\n]+/).map(e=>e.trim()).filter(Boolean),P=A.length>0?A.join(", "):"Not provided",z=null!==(N=null==B?void 0:B.RootMacAddress)&&void 0!==N?N:"—",L=null!==(y=null==M?void 0:null===(c=M.device_cfg)||void 0===c?void 0:null===(o=c[0])||void 0===o?void 0:o.X_ALU_COM_LastActiveTime)&&void 0!==y?y:null,F=(0,g._o)(L),q="string"==typeof L&&""!==L.trim()&&"—"!==F&&F!==L?"".concat(F," • ").concat(L):F,O=[{label:"Connection",value:null!==(w=T.Name)&&void 0!==w?w:"—"},{label:"Status",value:null!==(S=null!==(_=I.ConnectionStatus)&&void 0!==_?_:T.ConnectionStatus)&&void 0!==S?S:"Unknown"},{label:"External IPv4",value:R},{label:"External IPv6",value:U},{label:"Gateway",value:null!=E?E:"—"},{label:"DNS Servers",value:P},{label:"MAC Address",value:z},{label:"Session Length",value:q}];return(0,l.jsx)(Q.Vq,{open:C,onOpenChange:e=>{e||k()},children:(0,l.jsxs)(Q.cZ,{children:[(0,l.jsxs)(Q.fK,{children:[(0,l.jsx)(Q.$N,{children:"WAN Connection Details"}),(0,l.jsx)(Q.Be,{children:"Connection properties reported by the modem."})]}),(0,l.jsx)(Q.a7,{className:"max-h-[60vh] space-y-4 overflow-y-auto pr-1",children:(0,l.jsx)("div",{className:"grid gap-4 text-sm sm:grid-cols-2",children:O.map(e=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:e.label}),(0,l.jsx)("p",{className:"text-sm text-foreground",children:e.value})]},e.label))})}),(0,l.jsx)(Q.cN,{children:(0,l.jsx)(f.z,{variant:"outline",onClick:k,children:"Close"})})]})})}var es=a(29006),el=a(45855);let en=null!==(s=a(40257).env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==s?s:"";async function er(e){let t=await fetch("".concat(en).concat(e),{cache:"no-store"});if(!t.ok)throw Error("Request to ".concat(e," failed with ").concat(t.status));return await t.json()}function ei(){var e,t,a;let[s,u]=(0,o.useState)({}),[m,x]=(0,o.useState)(!0),[p,b]=(0,o.useState)(null),[v,j]=(0,o.useState)(1e3),[N,y]=(0,o.useState)(null),[w,_]=(0,o.useState)(!1),[S,C]=(0,o.useState)(0),[k,M]=(0,o.useState)(!1),[D,T]=(0,o.useState)(!1),[I,E]=(0,o.useState)(null),[R,U]=(0,o.useState)(!1),[A,P]=(0,o.useState)(null),[z,L]=(0,o.useState)(!1),[F,q]=(0,o.useState)(null),[O,V]=(0,o.useState)(!1),[Z,W]=(0,o.useState)(!1),[G,H]=(0,o.useState)(""),[Q,X]=(0,o.useState)(!1),[Y,$]=(0,o.useState)(!1),[J,K]=(0,o.useState)(!1),[ei,ec]=(0,o.useState)(!0),eu=(0,o.useCallback)(e=>{var t;let a="success"===e.tone?c.Am.success:"error"===e.tone?c.Am.error:c.Am.info,s=null!==(t=e.title)&&void 0!==t?t:e.message,l=e.title?e.message:void 0;a(s,l?{description:l}:void 0)},[]);(0,o.useEffect)(()=>{let e=window.localStorage.getItem("pollingEnabled");null!==e&&ec("true"===e)},[]);let em=(0,o.useCallback)(async e=>{if(!z){L(!0);try{let t=await fetch("".concat(en,"/api/led_state"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enable:e})});if(!t.ok)throw Error("LED update failed (".concat(t.status,")"));P(e),u(t=>({...t,ledState:e})),eu({tone:"success",message:e?"Device LEDs enabled.":"Device LEDs disabled."})}catch(e){eu({tone:"error",message:e.message||"Unable to change LED state."})}finally{L(!1)}}},[z,eu]),ex=(0,o.useCallback)(async()=>{if(!Q){X(!0),eu({tone:"info",message:"Renewing WAN IP…"});try{let e=(0,g.SR)(s.preloginStatus);await ed("/api/set_apn?apn=internet"),await eo(1e3),await ed("/api/set_apn?apn=xlunlimited"),await eo(1e3);let t=null,a=s.preloginStatus;for(let s=0;s<30&&(a=await er("/api/prelogin_status"),!(t=(0,g.SR)(a))||t===e);s+=1)await eo(1e3);t&&t!==e?(eu({tone:"success",message:"New WAN IP acquired: ".concat(t)}),u(e=>({...e,preloginStatus:a}))):eu({tone:"error",message:"Unable to obtain a new WAN IP. Please try again later."})}catch(e){eu({tone:"error",message:e.message||"WAN IP renewal failed."})}finally{X(!1),C(Date.now())}}},[s.preloginStatus,Q,eu]),ep=(0,o.useCallback)(async()=>{if(!Y){$(!0),eu({tone:"info",message:"Sending reboot command…"});try{await er("/api/do_reboot"),eu({tone:"success",message:"Reboot command sent. Modem is restarting."})}catch(e){eu({tone:"error",message:e.message||"Unable to reboot the device."})}finally{$(!1)}}},[Y,eu]),eg=(0,o.useCallback)(async e=>{if(!J){K(!0);try{var t;let a=Math.max(Date.now(),(null!==(t=s.dataExpired)&&void 0!==t?t:0)*1e3),l=Math.floor((a+1e3*e)/1e3);await ed("/api/set_data_expired?data_expired=".concat(l)),u(e=>({...e,dataExpired:l})),eu({tone:"success",message:"Data expiration updated."})}catch(e){eu({tone:"error",message:e.message||"Failed to update data expiration."})}finally{K(!1)}}},[s.dataExpired,J,eu]),eh=(0,o.useCallback)(async e=>{if(e.preventDefault(),J)return;if(!G){eu({tone:"error",message:"Please pick a date first."});return}let t=new Date("".concat(G,"T00:00:00"));if(Number.isNaN(t.getTime())){eu({tone:"error",message:"Invalid date format."});return}K(!0);try{let e=Math.floor(t.getTime()/1e3);await ed("/api/set_data_expired?data_expired=".concat(e)),u(t=>({...t,dataExpired:e})),H(""),eu({tone:"success",message:"Expiration date saved."})}catch(e){eu({tone:"error",message:e.message||"Failed to save expiration date."})}finally{K(!1)}},[G,J,eu]),ef=(0,o.useCallback)(async()=>{if(!O){V(!0);try{let e=await er("/api/sms");u(t=>({...t,sms:(0,g.EE)(e)}))}catch(e){eu({tone:"error",message:e.message||"Unable to refresh SMS inbox."})}finally{V(!1)}}},[O,eu]),eb=(0,o.useCallback)(async(e,t)=>{if(!O){V(!0);try{let a="/api/set_sms_state?smsid=".concat(encodeURIComponent(e.SMSID),"&smsunread=").concat(t?1:0);await er(a),u(a=>{var s;return{...a,sms:null===(s=a.sms)||void 0===s?void 0:s.map(a=>a.SMSID===e.SMSID?{...a,SMSUnread:t}:a)}})}catch(e){eu({tone:"error",message:e.message||"Unable to update SMS state."})}finally{V(!1)}}},[O,eu]),ev=(0,o.useCallback)(async e=>{if(!O){V(!0);try{let t=await fetch("".concat(en,"/api/delete_sms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sms_ids:[e]})});if(!t.ok)throw Error("Failed to delete SMS (".concat(t.status,")"));u(t=>{var a;return{...t,sms:null===(a=t.sms)||void 0===a?void 0:a.filter(t=>t.SMSID!==e)}}),q(t=>t===e?null:t),eu({tone:"success",message:"SMS deleted."})}catch(e){eu({tone:"error",message:e.message||"Unable to delete SMS."})}finally{V(!1)}}},[O,eu]),ej=(0,o.useCallback)(()=>{s.config&&E((0,g.SD)(s.config,1e3)),M(!0)},[s.config]),eN=(0,o.useCallback)((e,t)=>{E(a=>a?{...a,[e]:t}:a)},[]),ey=(0,o.useCallback)(async e=>{if(e.preventDefault(),I&&!R){U(!0);try{await er("/api/config/listener_available?host=".concat(encodeURIComponent(I.listen_host),"&port=").concat(encodeURIComponent(I.listen_port)));let e=(()=>{let e=Number(I.poll_interval_ms);return Number.isFinite(e)&&e>0?Math.max(500,e):1e3})(),t=(()=>{let e=Number(I.long_polling_interval_seconds);return Number.isFinite(e)&&e>0?Math.max(5,Math.floor(e)):10})(),a={router_host:I.router_host,router_user:I.router_user,router_password:I.router_password,listen_host:I.listen_host,listen_port:I.listen_port,poll_interval_ms:e,telegram:{enabled:"true"===I.telegram_enabled,api_base:I.telegram_api_base.trim(),bot_token:I.telegram_bot_token.trim(),chat_id:I.telegram_chat_id.trim(),parse_mode:I.telegram_parse_mode.trim()},long_polling:{enabled:"true"===I.long_polling_enabled,forward_sms_to_telegram:"true"===I.long_polling_forward_sms_to_telegram,interval_seconds:t},mqtt:{enabled:"true"===I.mqtt_enabled,broker:I.mqtt_broker.trim(),client_id:I.mqtt_client_id.trim(),username:I.mqtt_username.trim(),password:I.mqtt_password,topic_base:I.mqtt_topic_base.trim()||"modem/nokia"}},s=await fetch("".concat(en,"/api/config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Config save failed (".concat(s.status,")"))}eu({tone:"success",message:"Configuration saved."}),M(!1),C(Date.now())}catch(e){eu({tone:"error",message:e.message||"Unable to save configuration."})}finally{U(!1)}}},[I,R,eu]);(0,o.useEffect)(()=>{let e=!0,t=null,a=async()=>{try{_(!0);let[t,a,s,l,n,r,i,d,o,c,m,x,p]=await Promise.all([er("/api/config"),er("/api/prelogin_status"),er("/api/status_web"),er("/api/service_data"),er("/api/cell_identification").catch(()=>null),er("/api/device_status"),er("/api/daily_usage"),er("/api/get_data_expired").catch(()=>null),er("/api/sms").catch(()=>null),er("/api/wlan_configs_24g").catch(()=>null),er("/api/wlan_configs_5g").catch(()=>null),er("/api/wan_status").catch(()=>null),er("/api/led_state").catch(()=>null)]);if(!e)return;let h=null!=t?t:{};u({config:h,preloginStatus:a,statusWeb:s,serviceData:l,cellIdentification:n,deviceStatus:r,dailyUsage:i,dataExpired:(0,g.GQ)(d),sms:(0,g.EE)(o),wlan24:c,wlan5:m,wanStatus:x,ledState:(0,g.Av)(p)}),P((0,g.Av)(p)),y(Date.now()),b(null);let f=Math.max(500,(0,g.Rg)(h,1e3));j(e=>e===f?e:f)}catch(t){var s;if(!e)return;b(null!==(s=t.message)&&void 0!==s?s:"Unable to load dashboard data.")}finally{if(!e)return;x(!1),_(!1),ei&&(t=setTimeout(a,v))}};return a(),()=>{e=!1,t&&clearTimeout(t)}},[v,S,ei]),(0,o.useEffect)(()=>{var e;if(!D)return;let t=null!==(e=s.sms)&&void 0!==e?e:[];if(0===t.length){q(null);return}q(e=>e&&t.some(t=>t.SMSID===e)?e:t[0].SMSID)},[s.sms,D]);let ew=(0,o.useMemo)(()=>Math.round(v/1e3),[v]),e_=null!==(t=null===(e=s.sms)||void 0===e?void 0:e.filter(e=>e.SMSUnread).length)&&void 0!==t?t:0,eS=(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(f.z,{type:"button",variant:"outline",size:"icon",onClick:()=>ec(e=>{let t=!e;return window.localStorage.setItem("pollingEnabled",String(t)),window.dispatchEvent(new CustomEvent("polling:change",{detail:{enabled:t}})),t}),className:"h-9 gap-2 px-3",children:[(0,l.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(ei?"bg-emerald-400 animate-pulse":"bg-muted-foreground")}),ei]}),(0,l.jsx)(f.z,{type:"button",variant:"outline",size:"icon",onClick:()=>{C(Date.now())},disabled:w,"aria-label":w?"Refreshing":"Refresh",children:w?(0,l.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(r.Z,{className:"h-4 w-4"})}),(0,l.jsxs)(f.z,{type:"button",variant:"outline",size:"icon",onClick:()=>T(!0),className:"relative","aria-label":"SMS Inbox",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4"}),e_>0?(0,l.jsx)(h.C,{variant:"destructive",className:"absolute -right-1 -top-1 h-5 min-w-[1.25rem] rounded-full px-1 py-0 text-[10px]",children:e_}):null]}),(0,l.jsx)(f.z,{type:"button",variant:"outline",size:"icon",onClick:ej,"aria-label":"Configuration",children:(0,l.jsx)(d.Z,{className:"h-4 w-4"})})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(es.V,{toolbar:eS,children:[(0,l.jsx)("section",{className:"space-y-4",children:(0,l.jsx)(el.m,{eyebrow:"Nokia FastMile 5G Gateway 2",title:"Modem Dashboard",description:(0,l.jsxs)(l.Fragment,{children:["Live signal metrics, traffic usage, device health, and connected clients. Data refreshes automatically every ",ew," second",1===ew?"":"s","."]})})}),p&&(0,l.jsx)("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:p}),m?(0,l.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,l.jsx)("div",{className:"h-48 animate-pulse rounded-xl border border-neutral-800 bg-neutral-900/60"},t))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(B,{data:s,ledEnabled:A,ledBusy:z,onToggleLed:em,onRenewIp:ex,renewing:Q,onReboot:ep,rebooting:Y,onOpenWanDetails:()=>W(!0),onExtendData:eg,onCustomExpirySubmit:eh,onCustomExpiryChange:e=>H(e),customExpiry:G,expiryBusy:J}),(0,l.jsxs)("footer",{className:"flex flex-col gap-1 text-xs text-neutral-500 md:flex-row md:items-center md:justify-between",children:[(0,l.jsxs)("span",{children:["Last updated:"," ",N?new Date(N).toLocaleString():"—"]}),(0,l.jsxs)("span",{children:["Poll interval: ",ew," second",1===ew?"":"s"]})]})]})]}),(0,l.jsx)(ee,{open:D,onClose:()=>T(!1),messages:null!==(a=s.sms)&&void 0!==a?a:[],busy:O,onRefresh:ef,onMarkRead:eb,onDelete:ev,selectedSmsId:F,onSelect:q}),(0,l.jsx)(et,{open:k,onClose:()=>M(!1),draft:I,onChange:eN,onSubmit:ey,saving:R}),(0,l.jsx)(ea,{open:Z,onClose:()=>W(!1),preloginStatus:s.preloginStatus,wanStatus:s.wanStatus})]})}async function ed(e){let t=await fetch("".concat(en).concat(e));if(!t.ok)throw Error("Request to ".concat(e," failed with ").concat(t.status));await t.json().catch(()=>null)}async function eo(e){return new Promise(t=>setTimeout(t,e))}},6596:function(e,t,a){"use strict";a.d(t,{Qd:function(){return o},UQ:function(){return d},o4:function(){return c},vF:function(){return u}});var s=a(57437),l=a(13134),n=a(40875),r=a(2265),i=a(94508);let d=l.fC,o=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.ck,{ref:t,className:(0,i.cn)("border-b",a),...n})});o.displayName="AccordionItem";let c=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsx)(l.h4,{className:"flex",children:(0,s.jsxs)(l.xz,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",a),...d,children:[r,(0,s.jsx)(n.Z,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=l.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,s.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",a),children:n})})});u.displayName=l.VY.displayName},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return x},Be:function(){return p},GG:function(){return o},Vq:function(){return i},a7:function(){return g},cN:function(){return h},cZ:function(){return u},fK:function(){return m}});var s=a(57437),l=a(49027),n=a(2265),r=a(94508);let i=l.fC;l.xz;let d=l.h_,o=l.x8,c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",a),...n})});c.displayName=l.aV.displayName;let u=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(l.VY,{ref:t,className:(0,r.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-[calc(100vw-3rem)] -translate-x-1/2 -translate-y-1/2 gap-3 rounded-lg border border-border bg-background p-8 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-90 data-[state=closed]:zoom-out-95 sm:max-w-3xl sm:px-8",a),...i,children:n})]})});u.displayName=l.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-left",t),...a})};m.displayName="DialogHeader";let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});x.displayName=l.Dx.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=l.dk.displayName;let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("space-y-2 text-sm",t),...a})};g.displayName="DialogBody";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})};h.displayName="DialogFooter"},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var s=a(57437),l=a(2265),n=a(94508);let r=l.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),ref:t,...r})});r.displayName="Input"}},function(e){e.O(0,[523,342,155,309,191,220,267,971,117,744],function(){return e(e.s=57162)}),_N_E=e.O()}]);