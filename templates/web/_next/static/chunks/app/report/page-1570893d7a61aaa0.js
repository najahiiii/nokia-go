(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{18907:function(e,t,l){Promise.resolve().then(l.bind(l,97205))},97205:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return ee}});var a,n,o=l(57437),r=l(3137),d=l(42488),i=l(36346),s=l(88156),u=l(21047),c=l(17580),m=l(69430),x=l(28842),p=l(2265),b=l(7476),h=l(56940),f=l(97059),v=l(62994),g=l(23263),y=l(29006),w=l(45855),j=l(62869),N=l(90535),k=l(55156),T=l(94508);let _=p.forwardRef((e,t)=>{let{className:l,orientation:a="horizontal",decorative:n=!0,...r}=e;return(0,o.jsx)(k.f,{ref:t,decorative:n,orientation:a,className:(0,T.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",l),...r})});_.displayName=k.f.displayName;let D=(0,N.j)("flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function C(e){let{className:t,orientation:l,...a}=e;return(0,o.jsx)("div",{role:"group","data-slot":"button-group","data-orientation":l,className:(0,T.cn)(D({orientation:l}),t),...a})}function M(e){let{className:t,orientation:l="vertical",...a}=e;return(0,o.jsx)(_,{"data-slot":"button-group-separator",orientation:l,className:(0,T.cn)("bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto",t),...a})}var U=l(66070),L=l(47625),S=l(8147),B=l(22190);let F={light:"",dark:".dark"},E=p.createContext(null);function O(){let e=p.useContext(E);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let Z=p.forwardRef((e,t)=>{let{id:l,className:a,children:n,config:r,...d}=e,i=p.useId(),s="chart-".concat(l||i.replace(/:/g,""));return(0,o.jsx)(E.Provider,{value:{config:r},children:(0,o.jsxs)("div",{"data-chart":s,ref:t,className:(0,T.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...d,children:[(0,o.jsx)(R,{id:s,config:r}),(0,o.jsx)(L.h,{children:n})]})})});Z.displayName="Chart";let R=e=>{let{id:t,config:l}=e,a=Object.entries(l).filter(e=>{let[,t]=e;return t.theme||t.color});return a.length?(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(F).map(e=>{let[l,n]=e;return"\n".concat(n," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[a,n]=e,o=(null===(t=n.theme)||void 0===t?void 0:t[l])||n.color;return o?"  --color-".concat(a,": ").concat(o,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},P=S.u,I=p.forwardRef((e,t)=>{let{active:l,payload:a,className:n,indicator:r="dot",hideLabel:d=!1,hideIndicator:i=!1,label:s,labelFormatter:u,labelClassName:c,formatter:m,color:x,nameKey:b,labelKey:h}=e,{config:f}=O(),v=p.useMemo(()=>{var e;if(d||!(null==a?void 0:a.length))return null;let[t]=a,l="".concat(h||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),n=Y(f,t,l),r=h||"string"!=typeof s?null==n?void 0:n.label:(null===(e=f[s])||void 0===e?void 0:e.label)||s;return u?(0,o.jsx)("div",{className:(0,T.cn)("font-medium",c),children:u(r,a)}):r?(0,o.jsx)("div",{className:(0,T.cn)("font-medium",c),children:r}):null},[s,u,a,d,c,f,h]);if(!l||!(null==a?void 0:a.length))return null;let g=1===a.length&&"dot"!==r;return(0,o.jsxs)("div",{ref:t,className:(0,T.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[g?null:v,(0,o.jsx)("div",{className:"grid gap-1.5",children:a.filter(e=>"none"!==e.type).map((e,t)=>{let l="".concat(b||e.name||e.dataKey||"value"),a=Y(f,e,l),n=x||e.payload.fill||e.color;return(0,o.jsx)("div",{className:(0,T.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===r&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,t,e.payload):(0,o.jsxs)(o.Fragment,{children:[(null==a?void 0:a.icon)?(0,o.jsx)(a.icon,{}):!i&&(0,o.jsx)("div",{className:(0,T.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===r,"w-1":"line"===r,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===r,"my-0.5":g&&"dashed"===r}),style:{"--color-bg":n,"--color-border":n}}),(0,o.jsxs)("div",{className:(0,T.cn)("flex flex-1 justify-between leading-none",g?"items-end":"items-center"),children:[(0,o.jsxs)("div",{className:"grid gap-1.5",children:[g?v:null,(0,o.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,o.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});I.displayName="ChartTooltip";let z=B.D,K=p.forwardRef((e,t)=>{let{className:l,hideIcon:a=!1,payload:n,verticalAlign:r="bottom",nameKey:d}=e,{config:i}=O();return(null==n?void 0:n.length)?(0,o.jsx)("div",{ref:t,className:(0,T.cn)("flex items-center justify-center gap-4","top"===r?"pb-3":"pt-3",l),children:n.filter(e=>"none"!==e.type).map(e=>{let t="".concat(d||e.dataKey||"value"),l=Y(i,e,t);return(0,o.jsxs)("div",{className:(0,T.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==l?void 0:l.icon)&&!a?(0,o.jsx)(l.icon,{}):(0,o.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==l?void 0:l.label]},e.value)})}):null});function Y(e,t,l){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=l;return l in t&&"string"==typeof t[l]?n=t[l]:a&&l in a&&"string"==typeof a[l]&&(n=a[l]),n in e?e[n]:e[l]}K.displayName="ChartLegend";var A=l(32759),G=l(81103),H=l(21555),V=l(40257);let W=null!==(a=V.env.NEXT_PUBLIC_API_BASE_URL)&&void 0!==a?a:"",X=Math.max(Number(null!==(n=V.env.NEXT_PUBLIC_REPORT_POLL_MS)&&void 0!==n?n:1e4),5e3),q={combined:{label:" Total",color:"hsl(var(--chart-1))"},download:{label:" Download",color:"hsl(var(--chart-2))"},upload:{label:" Upload",color:"hsl(var(--chart-3))"}},$=[{value:"daily",label:"Harian"},{value:"weekly",label:"Mingguan"},{value:"monthly",label:"Bulanan"},{value:"yearly",label:"Tahunan"}],J={daily:"Total download, upload, dan gabungan per hari.",weekly:"Akumulasi mingguan membantu melihat pola mingguan.",monthly:"Akumulasi bulanan untuk tren jangka menengah.",yearly:"Akumulasi tahunan untuk perbandingan jangka panjang."};async function Q(){let e=await fetch("".concat(W,"/api/daily_usage"),{cache:"no-store"});if(!e.ok)throw Error("Request failed with status ".concat(e.status));return e.json()}function ee(){var e,t,l,a,n,u,c,m,x;let[N,k]=(0,p.useState)(null),[_,D]=(0,p.useState)(!0),[L,S]=(0,p.useState)(null),[B,F]=(0,p.useState)(!0),E=(0,p.useRef)(!0),O=(0,p.useCallback)(async()=>{try{E.current&&D(!0);let e=await Q();k(e),S(null)}catch(t){var e;S(null!==(e=t.message)&&void 0!==e?e:"Unable to load usage report.")}finally{E.current&&(D(!1),E.current=!1)}},[]);(0,p.useEffect)(()=>{let e=window.localStorage.getItem("pollingEnabled");null!==e&&F("false"!==e);let t=e=>{"pollingEnabled"===e.key&&F("false"!==e.newValue)},l=e=>{e.detail&&Object.prototype.hasOwnProperty.call(e.detail,"enabled")&&"boolean"==typeof e.detail.enabled&&F(e.detail.enabled)};return window.addEventListener("storage",t),window.addEventListener("polling:change",l),()=>{window.removeEventListener("storage",t),window.removeEventListener("polling:change",l)}},[]),(0,p.useEffect)(()=>{let e;let t=!1,l=async()=>{await O(),!t&&B&&(e=window.setTimeout(l,X))};return l(),()=>{t=!0,e&&window.clearTimeout(e)}},[O,B]);let R=(0,p.useMemo)(()=>(null==N?void 0:N.daily_data)?N.daily_data:[],[N]),Y=(0,p.useMemo)(()=>{if(0===R.length)return null;let e=R.reduce((e,t)=>{var l,a,n,o,r,d;return{download:e.download+(null!==(o=null===(l=t.download)||void 0===l?void 0:l.raw_bytes)&&void 0!==o?o:0),upload:e.upload+(null!==(r=null===(a=t.upload)||void 0===a?void 0:a.raw_bytes)&&void 0!==r?r:0),combined:e.combined+(null!==(d=null===(n=t.combined)||void 0===n?void 0:n.raw_bytes)&&void 0!==d?d:0)}},{download:0,upload:0,combined:0}),t=R.length;return{...e,days:t,average:t>0?e.combined/t:0}},[R]),G=null!==(n=null===(e=R[0])||void 0===e?void 0:e.date)&&void 0!==n?n:null,V=R.length>0?R[R.length-1].date:null,W=G&&V&&V!==G?"".concat(et(V)," – ").concat(et(G)):G?et(G):"—",ee=null!==(u=null==N?void 0:null===(t=N.total_usage)||void 0===t?void 0:t.combined)&&void 0!==u?u:Y?(0,H.td)(Y.combined):"0 B",ei=null!==(c=null==N?void 0:null===(l=N.total_usage)||void 0===l?void 0:l.download)&&void 0!==c?c:Y?(0,H.td)(Y.download):"0 B",es=null!==(m=null==N?void 0:null===(a=N.total_usage)||void 0===a?void 0:a.upload)&&void 0!==m?m:Y?(0,H.td)(Y.upload):"0 B",ec=Y&&Y.average>0?"".concat((0,H.td)(Y.average)," / hari"):null,ep=null!==(x=null==Y?void 0:Y.days)&&void 0!==x?x:R.length,eb=(0,p.useMemo)(()=>{var e;return null!==(e=null==N?void 0:N.last_7_days)&&void 0!==e?e:[]},[N]),eh=(0,p.useMemo)(()=>0===eb.length?0:eb.reduce((e,t)=>{var l,a;return Math.max(e,null!==(a=null===(l=t.combined)||void 0===l?void 0:l.raw_bytes)&&void 0!==a?a:0)},0),[eb]),ef=eb.length>0,[ev,eg]=(0,p.useState)("daily"),[ey,ew]=(0,p.useState)("daily"),ej=(0,p.useMemo)(()=>(function(e,t){if(0===e.length)return[];let l=e.map(e=>{var t,l,a,n,o,r;let d=ed(e.date);return d?{date:d,download:null!==(n=null===(t=e.download)||void 0===t?void 0:t.raw_bytes)&&void 0!==n?n:0,upload:null!==(o=null===(l=e.upload)||void 0===l?void 0:l.raw_bytes)&&void 0!==o?o:0,combined:null!==(r=null===(a=e.combined)||void 0===a?void 0:a.raw_bytes)&&void 0!==r?r:0}:null}).filter(e=>null!==e).sort((e,t)=>e.date.getTime()-t.date.getTime()),a="daily"===t&&l.length>90?l.slice(l.length-90):"weekly"===t&&l.length>520?l.slice(l.length-520):"monthly"===t&&l.length>1200?l.slice(l.length-1200):l,n=new Map;for(let e of a){let l=er(e.date,t);if(!l)continue;let a=n.get(l.key);if(a){a.download+=e.download,a.upload+=e.upload,a.combined+=e.combined;continue}n.set(l.key,{key:l.key,startDate:l.startDate,endDate:l.endDate,label:l.label,tooltipLabel:l.tooltip,download:e.download,upload:e.upload,combined:e.combined})}return Array.from(n.values()).sort((e,t)=>e.startDate.getTime()-t.startDate.getTime()).map(e=>({label:e.label,tooltipLabel:e.tooltipLabel,download:el(e.download),upload:el(e.upload),combined:el(e.combined)}))})(R,ev),[R,ev]),eN=(0,p.useMemo)(()=>0===R.length?null:R.reduce((e,t)=>{var l,a,n,o,r,d;let i=null!==(o=null===(l=t.combined)||void 0===l?void 0:l.raw_bytes)&&void 0!==o?o:0;i>e.combined.value&&(e.combined={value:i,date:t.date});let s=null!==(r=null===(a=t.download)||void 0===a?void 0:a.raw_bytes)&&void 0!==r?r:0;s>e.download.value&&(e.download={value:s,date:t.date});let u=null!==(d=null===(n=t.upload)||void 0===n?void 0:n.raw_bytes)&&void 0!==d?d:0;return u>e.upload.value&&(e.upload={value:u,date:t.date}),e},{combined:{value:0,date:""},download:{value:0,date:""},upload:{value:0,date:""}}),[R]),ek=(0,p.useMemo)(()=>ep<=0?null:(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:ep})," hari dipantau"]}),[ep]),eT=(0,p.useMemo)(()=>{var e;let t=null!==(e=null==eN?void 0:eN.combined.value)&&void 0!==e?e:0,l=t>0&&(null==eN?void 0:eN.combined.date)?"".concat((0,H.td)(t)," pada ").concat(et(eN.combined.date)):null;return ec||l?(0,o.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[ec?(0,o.jsxs)("span",{children:["Rata-rata ",ec]}):null,l?(0,o.jsxs)("span",{children:["Puncak ",l]}):null]}):null},[ec,eN]),e_=(0,p.useMemo)(()=>eN&&0!==eN.download.value&&eN.download.date?(0,o.jsxs)("span",{children:["Puncak ",(0,H.td)(eN.download.value)," pada"," ",et(eN.download.date)]}):null,[eN]),eD=(0,p.useMemo)(()=>eN&&0!==eN.upload.value&&eN.upload.date?(0,o.jsxs)("span",{children:["Puncak ",(0,H.td)(eN.upload.value)," pada"," ",et(eN.upload.date)]}):null,[eN]),eC=(0,p.useMemo)(()=>(function(e,t){if(0===e.length)return[];let l=e.map(e=>{var t,l,a,n,o,r;let d=ed(e.date);return d?{date:d,download:null!==(n=null===(t=e.download)||void 0===t?void 0:t.raw_bytes)&&void 0!==n?n:0,upload:null!==(o=null===(l=e.upload)||void 0===l?void 0:l.raw_bytes)&&void 0!==o?o:0,combined:null!==(r=null===(a=e.combined)||void 0===a?void 0:a.raw_bytes)&&void 0!==r?r:0}:null}).filter(e=>null!==e),a=new Map;for(let e of l){let l=er(e.date,t);if(!l)continue;let n=a.get(l.key);if(n){n.download+=e.download,n.upload+=e.upload,n.combined+=e.combined;continue}let o="daily"===t?eu(e.date):l.tooltip||l.label;a.set(l.key,{key:l.key,label:o,startDate:l.startDate,download:e.download,upload:e.upload,combined:e.combined})}return Array.from(a.values()).sort((e,t)=>t.startDate.getTime()-e.startDate.getTime())})(R,ey),[R,ey]),[eM,eU]=(0,p.useState)({key:"date",direction:"desc"}),eL=(0,p.useMemo)(()=>{let e=(e,t)=>{switch(t){case"date":return e.startDate.getTime();case"download":return e.download;case"upload":return e.upload;case"combined":return e.combined;default:return 0}},t="asc"===eM.direction?1:-1;return[...eC].sort((l,a)=>{let n=e(l,eM.key),o=e(a,eM.key);return n===o?0:n>o?t:-t})},[eC,eM]),eS=e=>{eU(t=>t.key===e?{key:e,direction:"asc"===t.direction?"desc":"asc"}:{key:e,direction:"desc"})},eB=(0,p.useMemo)(()=>eL.map((e,t)=>{let l=eL[t+1];return{key:e.key,displayLabel:e.label,formattedDownload:(0,H.td)(e.download),formattedUpload:(0,H.td)(e.upload),formattedCombined:(0,H.td)(e.combined),downloadTrend:en(e.download,null==l?void 0:l.download,l?l.label:void 0),uploadTrend:en(e.upload,null==l?void 0:l.upload,l?l.label:void 0),combinedTrend:en(e.combined,null==l?void 0:l.combined,l?l.label:void 0)}}),[eL]);return(0,o.jsxs)(y.V,{children:[(0,o.jsx)(w.m,{eyebrow:"Nokia FastMile 5G Gateway 2",title:"Data Usage Report",description:"Historical upload, download, and combined usage aggregated from modem telemetry."}),L&&(0,o.jsx)("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-2 py-4 text-sm text-red-200",children:L}),ej.length>0?(0,o.jsxs)(U.Zb,{className:"bg-card/80",children:[(0,o.jsxs)(U.Ol,{className:"flex flex-col gap-3 pb-0 sm:flex-row sm:items-center sm:justify-between",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)(U.ll,{className:"text-base font-semibold text-foreground",children:"Usage Trend"}),(0,o.jsx)(U.SZ,{className:"text-xs text-muted-foreground",children:J[ev]})]}),(0,o.jsx)(C,{className:"flex w-full flex-wrap justify-between rounded-lg border border-dashed bg-background/90 text-xs uppercase tracking-[0.18em] sm:w-auto sm:flex-nowrap sm:justify-end",children:$.map((e,t)=>(0,o.jsxs)(p.Fragment,{children:[(0,o.jsx)(j.z,{type:"button",size:"sm",variant:ev===e.value?"default":"ghost",className:(0,T.cn)("h-9 flex-1 px-3 transition sm:flex-none sm:px-4",ev===e.value?"bg-primary text-primary-foreground":"text-muted-foreground"),onClick:()=>eg(e.value),children:e.label}),t<$.length-1?(0,o.jsx)(M,{className:"hidden sm:flex"}):null]},e.value))})]}),(0,o.jsx)(U.aY,{className:"mt-4 px-0 pb-0",children:(0,o.jsx)(Z,{config:q,className:"h-[280px] w-full sm:h-[320px]",children:(0,o.jsxs)(b.T,{data:ej,children:[(0,o.jsx)(h.q,{strokeDasharray:"4 4",className:"fill-none stroke-border/40"}),(0,o.jsx)(f.K,{dataKey:"label",tickLine:!1,axisLine:!1,minTickGap:20}),(0,o.jsx)(v.B,{tickLine:!1,axisLine:!1,width:70,tickFormatter:ea}),(0,o.jsx)(P,{cursor:{strokeDasharray:"3 3"},content:(0,o.jsx)(I,{indicator:"line",formatter:(e,t)=>{var l,a;let n="number"==typeof e?e:Number(null!=e?e:0),o=null!==(a=null===(l=q[t])||void 0===l?void 0:l.label)&&void 0!==a?a:t;return[(0,H.td)(1073741824*n),o]},labelFormatter:(e,t)=>{var l,a;let n=null==t?void 0:null===(a=t[0])||void 0===a?void 0:null===(l=a.payload)||void 0===l?void 0:l.tooltipLabel;return null!=n?n:e}})}),(0,o.jsx)(z,{content:(0,o.jsx)(K,{})}),(0,o.jsx)(g.u,{type:"monotone",dataKey:"combined",stroke:"var(--color-combined)",fill:"var(--color-combined)",fillOpacity:.2,strokeWidth:2,name:"combined"}),(0,o.jsx)(g.u,{type:"monotone",dataKey:"download",stroke:"var(--color-download)",fill:"var(--color-download)",fillOpacity:.18,strokeWidth:1.5,name:"download"}),(0,o.jsx)(g.u,{type:"monotone",dataKey:"upload",stroke:"var(--color-upload)",fill:"var(--color-upload)",fillOpacity:.18,strokeWidth:1.5,name:"upload"})]})})})]}):null,(0,o.jsxs)("section",{className:"grid gap-4 text-sm text-muted-foreground md:grid-cols-2 xl:grid-cols-4",children:[(0,o.jsx)(ex,{label:"Reporting window",value:W,hint:ek,icon:(0,o.jsx)(r.Z,{className:"h-4 w-4"})}),(0,o.jsx)(ex,{label:"Total combined",value:ee,hint:eT,tone:"purple",icon:(0,o.jsx)(d.Z,{className:"h-4 w-4"})}),(0,o.jsx)(ex,{label:"Total download",value:ei,hint:e_,tone:"blue",icon:(0,o.jsx)(i.Z,{className:"h-4 w-4"})}),(0,o.jsx)(ex,{label:"Total upload",value:es,hint:eD,tone:"green",icon:(0,o.jsx)(s.Z,{className:"h-4 w-4"})})]}),(0,o.jsxs)("section",{className:(0,T.cn)("grid gap-6",ef?"lg:grid-cols-[minmax(260px,320px),1fr]":""),children:[ef?(0,o.jsxs)(U.Zb,{className:"bg-card/80",children:[(0,o.jsxs)(U.Ol,{className:"pb-2",children:[(0,o.jsx)(U.ll,{className:"text-base font-semibold text-foreground",children:"Last 7 days"}),(0,o.jsx)(U.SZ,{className:"text-xs",children:"Top-level view of recent usage spikes."})]}),(0,o.jsx)(U.aY,{className:"space-y-4 text-xs",children:eb.map(e=>{var t,l,a,n,r,d,i,s;let u=null!==(r=null===(t=e.combined)||void 0===t?void 0:t.formatted)&&void 0!==r?r:"0 B",c=null!==(d=null===(l=e.download)||void 0===l?void 0:l.formatted)&&void 0!==d?d:"0 B",m=null!==(i=null===(a=e.upload)||void 0===a?void 0:a.formatted)&&void 0!==i?i:"0 B",x=eh>0?Math.min(100,(null!==(s=null===(n=e.combined)||void 0===n?void 0:n.raw_bytes)&&void 0!==s?s:0)/eh*100):0;return(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-muted-foreground",children:[(0,o.jsx)("span",{children:et(e.date)}),(0,o.jsx)("span",{className:"text-foreground",children:u})]}),(0,o.jsx)(A.E,{value:x}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-muted-foreground",children:[(0,o.jsxs)("span",{children:["Down: ",c]}),(0,o.jsxs)("span",{children:["Up: ",m]})]})]},e.date)})})]}):null,(0,o.jsxs)(U.Zb,{className:"overflow-hidden bg-card/80",children:[(0,o.jsxs)(U.Ol,{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)(U.ll,{className:"text-base font-semibold text-foreground",children:"Usage History"}),(0,o.jsx)(U.SZ,{className:"text-xs text-muted-foreground",children:J[ey]})]}),(0,o.jsx)("div",{className:"w-full overflow-x-auto sm:w-auto",children:(0,o.jsx)("div",{className:"flex w-full flex-wrap justify-between rounded-lg border border-dashed bg-background/90 text-xs uppercase tracking-[0.18em] sm:w-auto sm:flex-nowrap sm:justify-end",children:$.map(e=>(0,o.jsx)(j.z,{type:"button",size:"sm",variant:ey===e.value?"default":"ghost",className:(0,T.cn)("h-8 min-w-[6.25rem] px-3 transition",ey===e.value?"bg-primary text-primary-foreground":"text-muted-foreground"),onClick:()=>ew(e.value),children:e.label},e.value))})})]}),(0,o.jsx)(U.aY,{className:"p-0",children:(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsx)("div",{className:"max-h-[67vh] min-w-[640px] overflow-y-auto rounded-b-lg border-t border-border/70",children:(0,o.jsxs)("table",{className:"w-full divide-y divide-border text-sm text-foreground",children:[(0,o.jsx)("thead",{className:"sticky top-0 bg-muted/75 text-xs uppercase tracking-[0.25em] text-muted-foreground backdrop-blur",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)(em,{label:"daily"===ey?"Date":"Period",align:"left",active:"date"===eM.key,direction:eM.direction,onClick:()=>eS("date")}),(0,o.jsx)(em,{label:"Download",align:"right",active:"download"===eM.key,direction:eM.direction,onClick:()=>eS("download")}),(0,o.jsx)(em,{label:"Upload",align:"right",active:"upload"===eM.key,direction:eM.direction,onClick:()=>eS("upload")}),(0,o.jsx)(em,{label:"Total",align:"right",active:"combined"===eM.key,direction:eM.direction,onClick:()=>eS("combined")})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-border/70",children:_?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,className:"px-4 py-6 text-center text-xs text-muted-foreground",children:"Loading usage history…"})}):0===eB.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,className:"px-4 py-6 text-center text-xs text-muted-foreground",children:"Usage history is not available for this range."})}):eB.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-left",children:e.displayLabel}),(0,o.jsx)("td",{className:"px-4 py-3 text-right",children:(0,o.jsx)(eo,{value:e.formattedDownload,trend:e.downloadTrend,valueClass:"text-blue-400"})}),(0,o.jsx)("td",{className:"px-4 py-3 text-right",children:(0,o.jsx)(eo,{value:e.formattedUpload,trend:e.uploadTrend,valueClass:"text-emerald-400"})}),(0,o.jsx)("td",{className:"px-4 py-3 text-right font-semibold",children:(0,o.jsx)(eo,{value:e.formattedCombined,trend:e.combinedTrend,valueClass:"text-foreground"})})]},e.key))})]})})})})]})]})]})}function et(e){if(!e)return"—";let t=new Date("".concat(e,"T00:00:00Z"));return Number.isNaN(t.getTime())?e:t.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}function el(e){return Number.isFinite(e)?Number((e/1073741824).toFixed(2)):0}function ea(e){return Number.isFinite(e)?e>=1?"".concat(e.toFixed(1)," GB"):"".concat(Math.round(1024*e)," MB"):"0 GB"}function en(e,t,l){if(null==t)return null;let a=null!=l?l:"periode sebelumnya",n=e-t;if(0===n)return{icon:(0,o.jsx)(u.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),className:"text-muted-foreground",tooltip:"Tidak berubah dibanding ".concat(a)};let r=Math.abs(n),d=(0,H.td)(r),i=t>0?" (".concat((r/t*100).toFixed(1),"%)"):"";return n>0?{icon:(0,o.jsx)(c.Z,{className:"h-3.5 w-3.5 text-emerald-400"}),className:"text-emerald-400",tooltip:"Naik ".concat(d).concat(i," dibanding ").concat(a)}:{icon:(0,o.jsx)(m.Z,{className:"h-3.5 w-3.5 text-rose-400"}),className:"text-rose-400",tooltip:"Turun ".concat(d).concat(i," dibanding ").concat(a)}}function eo(e){let{value:t,trend:l,valueClass:a,justify:n="end"}=e;return l?(0,o.jsxs)("span",{className:(0,T.cn)("inline-flex items-center gap-1","end"===n?"justify-end":"justify-start"),children:[(0,o.jsx)("span",{className:a,children:t}),(0,o.jsxs)(G.u,{children:[(0,o.jsx)(G.aJ,{asChild:!0,children:(0,o.jsx)("span",{className:(0,T.cn)("inline-flex items-center gap-1 text-[11px] font-medium",l.className),children:l.icon})}),(0,o.jsx)(G._v,{children:l.tooltip})]})]}):(0,o.jsx)("span",{className:(0,T.cn)(a,"inline-flex","end"===n?"justify-end":"justify-start"),children:t})}function er(e,t){let l=ei(e);switch(t){case"daily":return{key:l.toISOString().slice(0,10),startDate:l,label:es(l),tooltip:eu(l)};case"weekly":{let e=function(e){let t=ei(e),l=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(l+6)%7),t.setUTCHours(0,0,0,0),t}(l),t=function(e,t){let l=ei(e);return l.setUTCDate(l.getUTCDate()+6),l}(e,0);return{key:"week-".concat(e.toISOString().slice(0,10)),startDate:e,endDate:t,label:"Minggu ".concat(es(e)),tooltip:"".concat(eu(e)," – ").concat(eu(t))}}case"monthly":{let e=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),1));return{key:"month-".concat(e.getUTCFullYear(),"-").concat(e.getUTCMonth()),startDate:e,label:ec(e),tooltip:ec(e)}}case"yearly":{let e=new Date(Date.UTC(l.getUTCFullYear(),0,1));return{key:"year-".concat(e.getUTCFullYear()),startDate:e,label:"".concat(e.getUTCFullYear()),tooltip:"Tahun ".concat(e.getUTCFullYear())}}default:return null}}function ed(e){if(!e)return null;let t=e.split("-").map(e=>Number(e));if(3!==t.length)return null;let[l,a,n]=t;if(!Number.isFinite(l)||!Number.isFinite(a)||!Number.isFinite(n))return null;let o=new Date(Date.UTC(l,a-1,n));return Number.isNaN(o.getTime())?null:o}function ei(e){return new Date(e.getTime())}function es(e){return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})}function eu(e){return e.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}function ec(e){return e.toLocaleDateString("id-ID",{month:"long",year:"numeric"})}function em(e){let{label:t,active:l,direction:a,onClick:n,align:r="left"}=e;return(0,o.jsx)("th",{scope:"col",className:(0,T.cn)("px-4 py-3","right"===r?"text-right":"text-left"),children:(0,o.jsxs)("button",{type:"button",onClick:n,className:(0,T.cn)("inline-flex w-full items-center gap-1 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground transition hover:text-foreground","right"===r?"justify-end":"justify-start"),children:[(0,o.jsx)("span",{children:t}),(0,o.jsx)(x.Z,{className:(0,T.cn)("h-3.5 w-3.5 transition",l?"opacity-100":"opacity-40","asc"===a?"rotate-180":"")})]})})}function ex(e){var t;let{label:l,value:a,hint:n,tone:r="neutral",icon:d}=e,i={neutral:{card:"border-border/70 bg-gradient-to-br from-background/80 via-muted/40 to-background/60",glow:"bg-muted/50",label:"text-muted-foreground",value:"text-foreground",hint:"text-muted-foreground/80",iconBg:"bg-muted/40"},blue:{card:"border-blue-500/40 bg-gradient-to-br from-blue-950/50 via-blue-900/25 to-blue-950/10",glow:"bg-blue-500/40",label:"text-blue-100/80",value:"text-blue-100",hint:"text-blue-100/70",iconBg:"bg-blue-500/40"},green:{card:"border-emerald-500/40 bg-gradient-to-br from-emerald-950/45 via-emerald-900/25 to-emerald-950/10",glow:"bg-emerald-500/35",label:"text-emerald-50/80",value:"text-emerald-50",hint:"text-emerald-50/70",iconBg:"bg-emerald-500/35"},purple:{card:"border-purple-500/40 bg-gradient-to-br from-purple-950/45 via-purple-900/25 to-purple-950/10",glow:"bg-purple-500/40",label:"text-purple-100/80",value:"text-purple-100",hint:"text-purple-100/70",iconBg:"bg-purple-500/40"}},s=null!==(t=i[r])&&void 0!==t?t:i.neutral,[u,c]=(0,p.useState)(a),m=(0,p.useRef)(null);return(0,p.useEffect)(()=>{let e=a.trim();if(0===e.length){m.current=null,c(a);return}let t=e.match(/^([+-]?\d[\d.,]*)(\s*(GB|MB|TB|PB|%)?)$/i);if(!t){m.current=null,c(a);return}let[,l,n=""]=t,o=parseFloat(l.replace(/,/g,""));if(!Number.isFinite(o)){m.current=null,c(a);return}let r=l.includes(".")&&l.split(".")[1]?l.split(".")[1].replace(/[^\d]/g,"").length:0;m.current=o,c("".concat(o.toFixed(r)).concat(n))},[a]),(0,o.jsxs)(U.Zb,{className:(0,T.cn)("relative overflow-hidden border transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg",s.card),children:[(0,o.jsx)("div",{"aria-hidden":!0,className:(0,T.cn)("pointer-events-none absolute -right-16 top-1/2 h-32 w-32 -translate-y-1/2 rounded-full blur-3xl opacity-40",s.glow)}),(0,o.jsxs)("div",{className:"relative flex flex-col gap-3 p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,o.jsx)("span",{className:(0,T.cn)("text-[11px] font-semibold uppercase tracking-[0.22em]",s.label),children:l}),d?(0,o.jsx)("span",{className:(0,T.cn)("inline-flex h-9 w-9 items-center justify-center rounded-full backdrop-blur",s.iconBg),children:d}):null]}),(0,o.jsx)("span",{className:(0,T.cn)("text-2xl font-semibold tracking-tight",s.value),children:u}),n?(0,o.jsx)("div",{className:(0,T.cn)("text-xs",s.hint),children:n}):null]})]})}},32759:function(e,t,l){"use strict";l.d(t,{E:function(){return d}});var a=l(57437),n=l(60610),o=l(2265),r=l(94508);let d=o.forwardRef((e,t)=>{let{className:l,value:o=0,...d}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full bg-neutral-800",l),...d,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-blue-500 transition-transform",style:{transform:"translateX(-".concat(100-o,"%)")}})})});d.displayName=n.fC.displayName}},function(e){e.O(0,[715,897,119,896,220,971,117,744],function(){return e(e.s=18907)}),_N_E=e.O()}]);